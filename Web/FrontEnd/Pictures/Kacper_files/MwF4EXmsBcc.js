if (self.CavalryLogger) { CavalryLogger.start_js(["E2JJn"]); }

__d("P2PNUXRendererUtils",["CurrentUser","ImmutableObject","MercuryAttachmentType","P2PTransferParam","P2PTransferStatus","StoryAttachmentStyle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getTransferFromMessage:function(a){var c;if(!a||!a.attachments||!a.attachments.length)return null;a=a.attachments[0];this.isShareAttachment(a)&&(c=a.share.target);c&&(c=new(b("ImmutableObject"))(c));return c},isSuccessfulReceivedTransfer:function(a){return a&&a.receiver&&a.receiver.id===b("CurrentUser").getID()&&(a.status===b("P2PTransferStatus").COMPLETED||a.status===b("P2PTransferStatus").PENDING_RECIPIENT_NUX)},isShareAttachment:function(a){return!!(typeof a!=="string"&&a.attach_type==b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list&&a.share.style_list.indexOf(b("StoryAttachmentStyle").ORION)>=0)},doesNUXNeedCreditCards:function(a){var c=b("CurrentUser").getID()===a.sender.id;return!c&&a[b("P2PTransferParam").STATUS]===b("P2PTransferStatus").PENDING_RECIPIENT_NUX},isRecipientActionableStatus:function(a){var c=a[b("P2PTransferParam").STATUS];a=b("CurrentUser").getID()===a.sender.id;return!a&&(c===b("P2PTransferStatus").PENDING_RECIPIENT_NUX||c===b("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION||c===b("P2PTransferStatus").PENDING_PUSH_FAIL)}};e.exports=a}),null);
__d("P2PFriendsListStore",["EventEmitter","P2PActionConstants","P2PAPI","P2PDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[],i="",j=25;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").FRIENDS_LIST_UPDATED:this.handleFriendsListUpdated(c);this.emit("change");break}};a.prototype.handleFriendsListUpdated=function(a){(!i||i===a.query)&&(h=a.friends)};a.prototype.searchFriends=function(a){i=a,this.fetchFriends(a)};a.prototype.fetchFriends=function(a){b("P2PAPI").getFriendsList(j,a)};a.prototype.getFriends=function(){return h};e.exports=new a()}),null);
__d("P2PFriendPicker.react",["ix","cx","fbt","glyph","Image.react","Layout.react","debounce","MercuryIDs","P2PActions","P2PFriendsListStore","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PText.react","React","ScrollableArea.react","XUIButton.react","XUITextInput.react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("Layout.react").FillColumn,m=b("Layout.react").Column;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.state={friends:b("P2PFriendsListStore").getFriends(),showLoader:!0},this.log=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:this.props.eventFlow},c))}.bind(this),this.loggedSearch=null,this.friendPickerStoreSub=null,this.updateFriendsList=function(){this.setState({friends:b("P2PFriendsListStore").getFriends(),showLoader:!1})}.bind(this),this.onFriendSelect=function(a){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_FRIEND_PICKER_SELECT,{object_id:a.id}),b("P2PActions").chatSendViewOpened({amount:this.props.amount,referrer:this.props.referrer,sendMoneyNUXDismissed:this.props.sendMoneyNUXDismissed,threadID:b("MercuryIDs").getThreadIDFromUserID(a.id)}),this.props.onFriendSelected&&this.props.onFriendSelected()}.bind(this),this.getQuery=function(){return this.refs.input_ref&&this.refs.input_ref.refs.textInput.getValue()}.bind(this),this.onSearchInputChange=function(){this.loggedSearch||(this.log(b("P2PPaymentLoggerEvent").UI_ACTN_FRIEND_PICKER_SEARCH),this.loggedSearch=!0);var a=this.getQuery();a||this.setState({showLoader:!0});b("P2PFriendsListStore").searchFriends(a)}.bind(this),this.renderTagLineRow=function(){return this.state.showLoader?null:b("React").createElement("li",{className:"_1px5"},b("React").createElement("div",{className:"_1px6"},this.props.subTitle))}.bind(this),this.renderfriendRow=function(a){var c;this.props.buttonLabel&&(c=b("React").createElement(b("XUIButton.react"),{label:this.props.buttonLabel,size:"large"}));return b("React").createElement("li",{className:"_1px7",key:a.id,onClick:this.onFriendSelect.bind(this,a)},b("React").createElement(b("Layout.react"),null,b("React").createElement(l,null,b("React").createElement("div",{className:"_1px8"},b("React").createElement(b("Image.react"),{className:"_1px9",height:50,src:a.image_src,width:50})),b("React").createElement("div",{className:"_1pxa"},b("React").createElement(b("P2PText.react"),{className:"_1pxb",type:"primary"},a.full_name))),b("React").createElement(m,{className:"_1pxc"},c)))}.bind(this),this.renderFriendList=function(){var a=this.getQuery();if(!this.state.showLoader&&this.state.friends.length===0)if(a&&a.length)return b("React").createElement("div",{className:"_1pxd"},i._("No results."));else return b("React").createElement("div",{className:"_1pxd"},i._("You do not have any friends who are able to receive money."));return b("React").createElement("div",{className:"_1pxe"},b("React").createElement(b("P2PLoadingMask.react"),{visible:this.state.showLoader}),b("React").createElement(b("ScrollableArea.react"),{height:this.props.height},b("React").createElement("ul",null,this.state.friends.map(this.renderfriendRow),this.renderTagLineRow())))}.bind(this),c}a.prototype.componentDidMount=function(){this.friendPickerStoreSub=b("P2PFriendsListStore").addListener("change",this.updateFriendsList),b("P2PFriendsListStore").searchFriends(),this.log(b("P2PPaymentLoggerEvent").UI_ACTN_FRIEND_PICKER_SHOWN)};a.prototype.componentWillUnmount=function(){this.friendPickerStoreSub&&(this.friendPickerStoreSub.remove(),this.friendPickerStoreSub=null)};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_1pxf"},b("React").createElement("div",{className:"_1pxg"},b("React").createElement(b("XUITextInput.react"),{className:"_1pxn",height:"tall",onChange:b("debounce")(this.onSearchInputChange,150),placeholder:i._("Search friends"),ref:"input_ref"}),b("React").createElement(b("Image.react"),{className:"_1pxo",src:g("101450")}))),this.renderFriendList())};a.propTypes={amount:c.string,buttonLabel:c.node,eventFlow:c.string.isRequired,height:c.number,onFriendSelected:c.func,referrer:c.string,sendMoneyNUXDismissed:c.bool,subTitle:c.node};a.defaultProps={amount:"",buttonLabel:i._("Pay Friend"),height:350,title:i._("Select Friend"),subTitle:i._("These are your friends who are able to receive money.")};e.exports=a}),null);
__d("P2PSendMoneyNUXListItems.react",["fbt","ix","Image.react","P2PListRow.react","P2PText.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.renderRow=function(a,c){return b("React").createElement(b("P2PListRow.react"),{offset:this.props.size},b("React").createElement(b("Image.react"),a),b("React").createElement(b("P2PText.react"),{type:"primary"},c))}.bind(this),c}a.prototype.render=function(){var a=this.props.size;return b("React").createElement("div",null,this.renderRow(a==="small"?{height:18,src:h("94401"),width:18}:{height:36,src:h("94400"),width:36},g._("It's FREE to send and receive money.")),this.renderRow(a==="small"?{height:27,src:h("94405"),width:18}:{height:54,src:h("94404"),width:36},g._("Industry-leading security \u2014 password protection, anti-fraud team and more.")),this.renderRow(a==="small"?{height:13,src:h("94403"),width:18}:{height:26,src:h("94402"),width:36},g._("Send money from your debit card to theirs.")))};a.propTypes={offset:c.oneOf(["small","medium"])};a.defaultProps={size:"small"};e.exports=a}),null);
__d("P2PSendMoneyNUXTitleText.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";function a(){return b("React").createElement("div",null,g._("Send Money to Anyone"))}e.exports=a}),null);
__d("P2PSendMoneyNUXDialog.react",["cx","MessengerEnvironment","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PEncryptedText.react","P2PLogger","P2PNUXNextButton.react","P2PPaymentLoggerEvent","P2PSendMoneyNUXListItems.react","P2PSendMoneyNUXTitleText.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=function(){this.$1(b("P2PPaymentLoggerEvent").UI_ACTN_SEND_MONEY_NUX_NEXT_CLICK),this.props.onNextClick()}.bind(this),this.$1=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:this.props.eventFlow},this.props.loggingData,c))}.bind(this),c}a.prototype.componentDidMount=function(){this.$1(b("P2PPaymentLoggerEvent").UI_ACTN_SEND_MONEY_NUX_SHOWN)};a.prototype.render=function(){return b("React").createElement(b("P2PDialog.react"),{onToggle:this.props.onToggle,width:this.props.width},b("React").createElement(b("P2PDialogTitle.react"),null,b("React").createElement(b("P2PSendMoneyNUXTitleText.react"),null)),b("React").createElement(b("P2PDialogBody.react"),{className:"_1ou5"},b("React").createElement(b("P2PSendMoneyNUXListItems.react"),{size:"large"})),b("React").createElement(b("P2PDialogFooter.react"),{leftContent:b("React").createElement("div",{className:"_1ou6"},b("React").createElement(b("P2PEncryptedText.react"),null))},b("React").createElement(b("P2PNUXNextButton.react"),{onNextClick:this.$2})))};a.propTypes={eventFlow:c.string,onToggle:c.func.isRequired,onNextClick:c.func.isRequired,width:c.number};a.defaultProps={width:b("MessengerEnvironment").messengerui?400:350};e.exports=a}),null);
__d("P2PChannelType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CREDIT_CARD_CHANGED:"P2P/CreditCardChanged",CREDIT_CARD_DELETED:"P2P/CreditCardDeleted",TRANSFER_STATUS_CHANGED:"P2P/TransferStatusChanged",PLATFORM_CONTEXT_NEW:"P2P/PlatformContextNew",PLATFORM_CONTEXT_DISMISSED:"P2P/PlatformContextDismissed",PLATFORM_CONTEXT_ELIGIBLE_ITEM_UPDATED:"P2P/PlatformContextEligibleItemUpdated",PAYMENT_REQUEST_STATUS_CHANGED:"P2P/PaymentRequestStateChanged"})}),null);
__d("P2PPaymentMethodCategory",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CREDIT_CARD:"credit_card",DEBIT_CARD:"debit_card",PREPAID_CARD:"prepaid_card",STORED_VALUE_ACCOUNT:"stored_value_account",PAYPAL_BA:"paypal_ba"})}),null);
__d("P2PCreditCard",["fbt","ix","CreditCardFormParam","CreditCardTypeEnum","P2PPaymentMethodCategory","PaymentMethodUtils"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={visa:{image:h("95537"),imageLarge:h("95538"),name:"Visa"},mc:{image:h("95521"),imageLarge:h("95522"),name:"MasterCard"},disc:{image:h("95512"),imageLarge:h("95513"),name:"Discover"},jcb:{image:h("95518"),imageLarge:h("95519"),name:"JCB"},amex:{image:h("95501"),imageLarge:h("95502"),name:"American Express"},unknown:{image:h("26967"),imageLarge:h("26967"),name:g._("Unknown Card Type")}};function a(a){this.setCredentialId(a[b("CreditCardFormParam").CREDENTIAL_ID]),this.setCardType(a[b("CreditCardFormParam").CARD_TYPE]),this.setCreditCardNumber(a[b("CreditCardFormParam").CARD_NUMBER]),this.setSelected(a.selected),this.setZipCode(a[b("CreditCardFormParam").ZIP]),this.setCSC(a[b("CreditCardFormParam").CSC]),this.setExp(a[b("CreditCardFormParam").CARD_EXPIRATION]),this.setIsPreset(a.isPreset),this.setIsVerified(a.isVerified),this.setIsMobileVerified(a.isMobileVerified),this.setIsPersonalTransferEligible(a.isPersonalTransferEligible),this.setCategory(a.category)}a.prototype.getCreditCardNumber=function(){return this[b("CreditCardFormParam").CARD_NUMBER]};a.prototype.setCreditCardNumber=function(a){a=a.replace(/ /g,""),this.setCardProviderProps(this[b("CreditCardFormParam").CARD_TYPE],a),a=a.substr(a.length-4),this[b("CreditCardFormParam").CARD_NUMBER]=a};a.prototype.setCardProviderProps=function(a,b){a=this.$1(a,b);i[a]&&(this.setImage(i[a].image),this.setImageLarge(i[a].imageLarge),this.setName(i[a].name))};a.prototype.getExp=function(){return this[b("CreditCardFormParam").CARD_EXPIRATION]};a.prototype.getExpFormatted=function(){var a=this[b("CreditCardFormParam").CARD_EXPIRATION];return a?a[b("CreditCardFormParam").MONTH]+"/"+a[b("CreditCardFormParam").YEAR]:""};a.prototype.getExpFormattedShort=function(){var a=this[b("CreditCardFormParam").CARD_EXPIRATION],c="";a&&a[b("CreditCardFormParam").MONTH]&&a[b("CreditCardFormParam").YEAR]&&(c=a[b("CreditCardFormParam").MONTH]+"/",a[b("CreditCardFormParam").YEAR].length===4?c+=a[b("CreditCardFormParam").YEAR].substr(2):c+=a[b("CreditCardFormParam").YEAR]);return c};a.prototype.setExp=function(a){if(!a)return;var c={};c[b("CreditCardFormParam").MONTH]=a[b("CreditCardFormParam").MONTH];c[b("CreditCardFormParam").YEAR]=a[b("CreditCardFormParam").YEAR];c[b("CreditCardFormParam").MONTH]&&c[b("CreditCardFormParam").MONTH].length===1&&(c[b("CreditCardFormParam").MONTH]="0"+c[b("CreditCardFormParam").MONTH]);c[b("CreditCardFormParam").YEAR]&&c[b("CreditCardFormParam").YEAR].length===2&&(a=new Date().getFullYear()+"",a=a.substr(0,2),c[b("CreditCardFormParam").YEAR]=a+c[b("CreditCardFormParam").YEAR]);this[b("CreditCardFormParam").CARD_EXPIRATION]=c};a.prototype.getCSC=function(){return this[b("CreditCardFormParam").CSC]};a.prototype.setCSC=function(a){this[b("CreditCardFormParam").CSC]=a};a.prototype.getZipCode=function(){return this[b("CreditCardFormParam").ZIP]};a.prototype.setZipCode=function(a){this[b("CreditCardFormParam").ZIP]=a};a.prototype.getSelected=function(){return this.$2};a.prototype.setSelected=function(a){this.$2=a};a.prototype.getCardType=function(){return this[b("CreditCardFormParam").CARD_TYPE]};a.prototype.setCardType=function(a){this[b("CreditCardFormParam").CARD_TYPE]=a,this.setCardProviderProps(a,this[b("CreditCardFormParam").CARD_NUMBER])};a.prototype.getCredentialId=function(){return this[b("CreditCardFormParam").CREDENTIAL_ID]};a.prototype.setCredentialId=function(a){this[b("CreditCardFormParam").CREDENTIAL_ID]=a};a.prototype.$1=function(a,c){var d="default",e;a?(e=Object.keys(b("CreditCardTypeEnum")).filter(function(c){return b("CreditCardTypeEnum")[c]===a})[0],d=this.$3(e)):c&&(e=b("PaymentMethodUtils").getCardType(c),e&&(d=e.name));return d};a.prototype.getImage=function(){return this.$4||i.unknown.image};a.prototype.setImage=function(a){this.$4=a};a.prototype.getImageLarge=function(){return this.$5||i.unknown.imageLarge};a.prototype.setImageLarge=function(a){this.$5=a};a.prototype.getName=function(){return this.$6||i.unknown.name};a.prototype.setName=function(a){this.$6=a};a.prototype.getIsPreset=function(){return this.$7};a.prototype.setIsPreset=function(a){this.$7=a||!1};a.prototype.$3=function(a){__p&&__p();switch(a){case"VISA":a="visa";break;case"AMERICANEXPRESS":a="amex";break;case"MASTERCARD":a="mc";break;case"DISCOVER":a="disc";break;case"JCB":a="jcb";break;default:a="unknown";break}return a};a.prototype.getCreditCardNumberFormatted=function(){return"*"+this[b("CreditCardFormParam").CARD_NUMBER]};a.prototype.getDetailsFormatted=function(){return this.getName()+" "+this.getCreditCardNumberFormatted()};a.prototype.getCreditCardNumberMask=function(){return"**** **** **** "+this[b("CreditCardFormParam").CARD_NUMBER]};a.prototype.getMaxCSCLength=function(){var a=this.$1(this[b("CreditCardFormParam").CARD_TYPE],this[b("CreditCardFormParam").CARD_NUMBER]);return a==="amex"?4:3};a.prototype.getIsVerified=function(){return this.$8||!1};a.prototype.setIsVerified=function(a){this.$8=a};a.prototype.getIsMobileVerified=function(){return this.$9||!1};a.prototype.setIsMobileVerified=function(a){this.$9=a};a.prototype.getIsPersonalTransferEligible=function(){return!!this.$10};a.prototype.setIsPersonalTransferEligible=function(a){this.$10=a};a.prototype.getCategory=function(){return this.$11};a.prototype.setCategory=function(a){this.$11=a};a.prototype.getCategoryName=function(){switch(this.$11){case b("P2PPaymentMethodCategory").DEBIT_CARD:return g._("Debit");case b("P2PPaymentMethodCategory").CREDIT_CARD:return g._("Credit");case b("P2PPaymentMethodCategory").PREPAID_CARD:return g._("Prepaid");default:return null}};a.prototype.isExpired=function(){var a=this.getExp();if(!a)return!1;var b=a.month;a=a.year;var c=new Date(),d=c.getFullYear()+"";c=c.getMonth()+1+"";c=c.length===1?"0"+c:c;return a<d||d===a&&b<c};e.exports=a}),null);
__d("P2PTransferStore",["Arbiter","ChannelConstants","CreditCardFormParam","CurrentUser","EventEmitter","ImmutableObject","P2PActionConstants","P2PActions","P2PAPI","P2PChannelType","P2PCreditCard","P2PDispatcher","P2PGKValues","P2PNUXRendererUtils","P2PTransferParam","P2PTransferStatus","MercuryThreadInformer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MercuryThreadInformer").get(),i=!1,j,k=[],l,m={},n=!1,o=!1,p=new Set(),q=!1,r=0;function s(a,c){c&&(m[c]=new(b("ImmutableObject"))(a))}function t(a,b){b&&(m[b]={error:a})}c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType(b("P2PChannelType").TRANSFER_STATUS_CHANGED),this.handleChannelTransferStatusChanged.bind(this)),h.subscribe("messages-received",this.handleMessageReceived.bind(this)),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){__p&&__p();var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").TRANSFERS_UPDATED:this.handleTransfersUpdated(c);this.emit("change");break;case b("P2PActionConstants").TRANSFERS_UPDATED_ERROR:this.handleTransfersUpdatedError(c);this.emit("change");break;case b("P2PActionConstants").NUX_TRANSFERS_UPDATED:this.handleNUXTransfersUpdated(c);this.emit("change");break;case b("P2PActionConstants").TRANSFER_ADDED:this.handleTransferAdded(c);this.emit("change");break;case b("P2PActionConstants").TRANSFER_UPDATED:this.handleTransferUpdated(c);this.emit("change");break;case b("P2PActionConstants").TRANSFER_ACCEPTED:this.handleTransferAccepted();this.emit("change");break;case b("P2PActionConstants").TRANSFER_DECLINED:this.handleTransferDeclined(c);this.emit("change");break;case b("P2PActionConstants").EXTENSIVE_TRANSFER_DETAILS_UPDATED:this.handleTransferWithExtensiveDetails(c);this.emit("change");break}};a.prototype.getAsyncRequestState=function(){return m};a.prototype.handleTransfersUpdated=function(a){__p&&__p();l=null;n=!0;var c=[];a=a.map(function(a){var d={},e=this.getTransferByID(a[b("P2PTransferParam").TRANSFER_ID]),f={};a.creditCard&&(d[b("CreditCardFormParam").CREDENTIAL_ID]=a.creditCard[b("CreditCardFormParam").CREDENTIAL_ID],d[b("CreditCardFormParam").CARD_NUMBER]=a.creditCard[b("CreditCardFormParam").CARD_NUMBER],d[b("CreditCardFormParam").CARD_TYPE]=a.creditCard[b("CreditCardFormParam").CARD_TYPE],a.creditCard=new(b("P2PCreditCard"))(d));if(e)for(var g in e)f[g]=a[g]!==null?a[g]:e[g];c.push(a[b("P2PTransferParam").TRANSFER_ID]);return new(b("ImmutableObject"))(a,f)}.bind(this));var d=k.filter(function(a){return c.indexOf(a[b("P2PTransferParam").TRANSFER_ID])===-1});k=a.concat(d);k=k.sort(function(a,b){return b.creationTime-a.creationTime})};a.prototype.handleTransfersUpdatedError=function(a){l=a.error,t(a.requestID,a.error)};a.prototype.handleNUXTransfersUpdated=function(a){n||this.handleTransfersUpdated(a)};a.prototype.handleTransferAdded=function(a){__p&&__p();var c;s(a,a.requestID);a&&a.sender&&a.sender.id===b("CurrentUser").getID()&&(q=!0);c=k.filter(function(c){return c[b("P2PTransferParam").TRANSFER_ID]===a[b("P2PTransferParam").TRANSFER_ID]})[0];if(c)return;k.push(new(b("ImmutableObject"))(a));k=k.sort(function(a,b){return b.creationTime-a.creationTime})};a.prototype.handleTransferAddedError=function(a){t(a.requestID,a.errors)};a.prototype.handleChannelTransferStatusChanged=function(a,c){c=c.obj,b("P2PActions").transferUpdated(c)};a.prototype.handleMessageReceived=function(a,c){__p&&__p();for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){a=c[d];for(var e=0;e<a.length;e++)if(a[e].attachments&&a[e].attachments.length){var f=b("P2PNUXRendererUtils").getTransferFromMessage(a[e]);if(f){!this.hasReceived()&&f.receiver.id===b("CurrentUser").getID()&&b("P2PAPI").getBannerStates();b("P2PActions").transferAdded(f);return}}}};a.prototype.handleTransferUpdated=function(a){for(var c=0,d=k.length;c<d;c++)k[c][b("P2PTransferParam").TRANSFER_ID]===a[b("P2PTransferParam").TRANSFER_ID]&&(k[c]=b("ImmutableObject").set(k[c],a))};a.prototype.handleTransferAccepted=function(){var a;for(var c=0,d=k.length;c<d;c++)k[c][b("P2PTransferParam").STATUS]===b("P2PTransferStatus").PENDING_RECIPIENT_NUX&&(a={},a[b("P2PTransferParam").STATUS]=b("P2PTransferStatus").COMPLETED,k[c]=b("ImmutableObject").set(k[c],a));o=!0};a.prototype.handleTransferDeclined=function(a){var c;for(var d=0,e=k.length;d<e;d++)if(k[d][b("P2PTransferParam").TRANSFER_ID]===a[b("P2PTransferParam").TRANSFER_ID]&&k[d][b("P2PTransferParam").STATUS]===b("P2PTransferStatus").PENDING_RECIPIENT_NUX){c={};c[b("P2PTransferParam").STATUS]=b("P2PTransferStatus").CANCELED_DECLINED;k[d]=b("ImmutableObject").set(k[d],c);break}};a.prototype.handleTransferUpdatedError=function(a){t(a.requestID,a.errors)};a.prototype.getTransferByID=function(a){return k.filter(function(c){return a===c[b("P2PTransferParam").TRANSFER_ID]})[0]};a.prototype.getAll=function(a){i||(i=!0,b("P2PAPI").getTransactions(a));return k};a.prototype.getNUXTransfer=function(){var a=k.filter(function(a){return b("P2PNUXRendererUtils").isRecipientActionableStatus(a)})[0];!a&&!j&&!i&&(j=!0,b("P2PAPI").getNUXTransactions());a&&!a.currency&&r++<3&&b("P2PAPI").getNUXTransactions();return a};a.prototype.hasTransfers=function(){return k.length>0};a.prototype.hasAccepted=function(){return o};a.prototype.hasReceivedFromSender=function(a){for(var b=0,c=k.length;b<c;b++)if(k[b].sender.id===a)return!0;return!1};a.prototype.hasReceived=function(){for(var a=0,c=k.length;a<c;a++)if(k[a].receiver.id===b("CurrentUser").getID())return!0;return!1};a.prototype.getTransferFetchError=function(){return l};a.prototype.getTransferWithExtensiveDetailsByID=function(a){p.has(a)||(p.add(a),b("P2PAPI").getExtensiveTransferDetailsByID(a))};a.prototype.handleTransferWithExtensiveDetails=function(a){this.getTransferByID(a.transfer_id)?this.handleTransferUpdated(a):this.handleTransferAdded(a)};a.prototype.getAllLocal=function(){return k};a.prototype.hasSentDuringSession=function(){return q};a.prototype.shouldShowSenderNUX=function(){return!b("P2PGKValues").P2PUserAddedCredentialBefore&&!this.hasSentDuringSession()};e.exports=new a()}),null);
__d("P2PFriendPickerDialog.react",["cx","fbt","P2PActions","P2PDialog.react","P2PDialogBody.react","P2PDialogTitle.react","P2PFriendPicker.react","P2PSendMoneyNUXDialog.react","P2PTransferStore","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;a=b("React").PropTypes;c=babelHelpers.inherits(j,b("React").Component);i=c&&c.prototype;function j(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={sendMoneyNUXDismissed:!1},this.handleToggle=function(a){a||this.props.onClose()}.bind(this),this.handleNUXNextClick=function(){this.setState({sendMoneyNUXDismissed:!0})}.bind(this),b}j.prototype.render=function(){var a=445;return!this.state.sendMoneyNUXDismissed&&b("P2PTransferStore").shouldShowSenderNUX()?b("React").createElement(b("P2PSendMoneyNUXDialog.react"),{eventFlow:this.props.eventFlow,onToggle:this.handleToggle,onNextClick:this.handleNUXNextClick,width:a}):b("React").createElement(b("P2PDialog.react"),{onToggle:this.handleToggle,width:a},b("React").createElement(b("P2PDialogTitle.react"),null,b("React").createElement("div",{className:"_4ia-"},this.props.title)),b("React").createElement(b("P2PDialogBody.react"),{className:"_4ib0"},b("React").createElement(b("P2PFriendPicker.react"),{amount:this.props.amount,buttonLabel:this.props.buttonLabel,eventFlow:this.props.eventFlow,onFriendSelected:this.props.onClose,referrer:this.props.referrer,sendMoneyNUXDismissed:this.state.sendMoneyNUXDismissed,subTitle:this.props.subTitle})))};j.propTypes={amount:a.string,buttonLabel:a.node,eventFlow:a.string.isRequired,onClose:a.func.isRequired,referrer:a.string,subTitle:a.node,title:a.node};j.defaultProps={amount:"",title:h._("Select Friend"),subTitle:h._("These are your friends who are able to receive money.")};e.exports={module:j,render:function(a){b("P2PActions").showDialog(j,babelHelpers["extends"]({title:h._("Send Money to Friends")},a,{onClose:b("P2PActions").hideDialog}))}}}),null);
__d("P2PSendMoneyHelper",["fbt","MercuryIDs","P2PActions","P2PFriendPickerDialog.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("P2PFriendPickerDialog.react").module;a={bindProfileSendMoneyAction:function(a,c){a.subscribe("itemclick",function(a,d){d.item.getValue()==="send_money"&&b("P2PActions").chatSendViewOpened({referrer:"profile_action",threadID:b("MercuryIDs").getThreadIDFromUserID(c)})})},bindPeopleSearchResultSendMoneyAction:function(a,c){a.subscribe("itemclick",function(a,d){d.item.getValue()==="send_money"&&(b("P2PLogger").log(b("P2PPaymentLoggerEvent").ACTN_PEOPLE_SEARCH_SEND_MONEY_BUTTON_CLICKED,{www_event_referrer:"www_people_search_result",www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_PEOPLE_SEARCH_SEND_MONEY,object_id:c}),b("P2PActions").chatSendViewOpened({referrer:"people_search_result",threadID:b("MercuryIDs").getThreadIDFromUserID(c)}))})},initPaymentsBluebarMenuItems:function(a){a.subscribe("itemclick",function(a,c){a=c.item.getValue();a==="send_money"?b("P2PActions").showDialog(h,{eventFlow:b("P2PPaymentLoggerEventFlow").UI_FLOW_SEND_MONEY_BLUEBAR,onClose:b("P2PActions").hideDialog,referrer:"bluebar",title:g._("Send Money to Friends")}):a==="payments_history"&&b("P2PLogger").log(b("P2PPaymentLoggerEvent").UI_ACTN_PAYMENTS_HISTORY_BLUEBAR_CLICK,{www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_PAYMENTS_MENU_BLUEBAR})})}};e.exports=a}),null);