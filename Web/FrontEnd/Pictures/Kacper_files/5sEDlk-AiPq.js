if (self.CavalryLogger) { CavalryLogger.start_js(["aOe+s"]); }

__d("MessengerContentSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",CHANGE_QUERY:"change_query",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions",LOAD_MESSAGE_IN_THREAD:"load_message_in_thread",BROWSE_CONTEXT:"browse_context"});b=Object.freeze({SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads",END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button"});e.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:a,FUNNEL_LOGGER_TAGS:b}}),null);
__d("MessengerContentSearchFunnelLogger",["FunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_NAME,h=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS,i=null,j=0,k=0,l=new Set(),m=0,n=0;function a(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=null,j=0,k=0,n=0,l.clear(),m=Date.now(),b("FunnelLogger").startFunnel(g),c&&b("FunnelLogger").addFunnelTag(g,c),b("FunnelLogger").setFunnelTimeout(g,86400),b("FunnelLogger").appendActionWithPayloadIfNew(g,h.INITIATE_CONTENT_SEARCH,{query:a})}function c(a){b("FunnelLogger").appendActionWithPayload(g,h.CHANGE_QUERY,{query:a})}function d(a){b("FunnelLogger").appendActionWithPayload(g,h.THREAD_IMPRESSIONS,{impressionList:a,latency:Date.now()-m})}function f(a,c){b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MORE_THREADS,{impressionList:a,latency:c})}function o(){n+=1}function p(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=a,j=0,n=0,l.clear(),b("FunnelLogger").appendActionWithPayload(g,h.SELECT_THREAD,{thread_id:a,has_results:c})}function q(a){j+=1,k+=1}function r(a,c,d){i=c,l.add(a),b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MESSAGE_IN_THREAD,{latency:d})}function s(a){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),a?b("FunnelLogger").appendActionWithTagAndPayloadIfNew(g,h.END_CONTENT_SEARCH,a,{totalBrowseActions:k}):b("FunnelLogger").appendActionWithPayloadIfNew(g,h.END_CONTENT_SEARCH,{totalBrowseActions:k}),b("FunnelLogger").endFunnel(g)}e.exports={browseMessageInThread:q,endFunnel:s,loadMessageInThread:r,logContextBrowse:o,logChangeQuery:c,logLoadMoreThreads:f,logThreadImpressions:d,logThreadSelect:p,startFunnel:a}}),null);
__d("MessengerThreadSearchIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"magnifying-glass",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Search"},b("React").createElement("polygon",{id:"Bounding-Box",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-1",d:"M15.499,9.000053 C11.909,9.000053 8.9995,11.9106492 8.9995,15.5009175 C8.9995,19.0911858 11.909,22.0022817 15.499,22.0022817 C19.0885,22.0022817 21.998,19.0911858 21.998,15.5009175 C21.998,11.9106492 19.0885,9.000053 15.499,9.000053 Z M25.4875,28.30874 L21.6335,23.8523894 C21.313,23.482068 20.7755,23.4056049 20.355,23.6574834 C18.934,24.5085729 17.276,25.0023347 15.499,25.0023347 C10.253,25.0023347 6,20.7483865 6,15.5009175 C6,10.2539482 10.253,6 15.499,6 C20.7445,6 24.9975,10.2539482 24.9975,15.5009175 C24.9975,17.2770608 24.5045,18.9357608 23.655,20.3565755 C23.4065,20.7708757 23.491,21.3016197 23.8555,21.6184668 L28.3065,25.4841024 L25.4875,28.30874 Z M28.3065,25.4841024 C29.183,26.2452352 29.231,27.5915859 28.4105,28.4131896 C27.591,29.2352931 26.247,29.1873162 25.4875,28.30874 L28.3065,25.4841024 Z",fill:"#000000"}))));f.icon=a}),null);
__d("MessengerThreadSearchIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"8 8 48 48"},b("React").createElement("title",void 0,"search conversation"),b("React").createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:c,strokeMiterlimit:"10",strokeWidth:"2"}),b("React").createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:c,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))}f.make=a}),null);
__d("MessengerInfoPanelSearchReact.bs",["ix","cx","fbt","Keys","bs_curry","Image.bs","React","Bootload.bs","asset","Bootloader","CurrentUser","ReasonReact.bs","MessengerActions","MessengerURIStore","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MessengerThreadSearchIconSVGReact.bs","MessengerContentSearchFunnelLogger","MessengerThreadSearchIconSVGM4React.bs","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableMessengerContentSearchFunnelLogger.bs"],a,"MessengerInfoPanelSearchReact.bs");return 0}c=[a];var j=b("Bootload.bs").Create(c);function k(a,c){b("MessengerContentSearchFunnelLogger").startFunnel(a,b("MessengerContentSearchFunnelLoggerConstants").SEARCH_WITHIN_THREAD);return 0}function l(){var a=b("MessengerURIStore").getState().query;a=a==null;b("MessengerActions").changeQuery(a?"":void 0);return 0}function m(a){var c=b("MessengerURIStore").getState().query,d=c==null?"":c;a.preventDefault();b("bs_curry")._1(j[0],function(a){return k(d,a)});return l(0)}function n(a){if(a.keyCode===b("Keys").RETURN){a.preventDefault();return l(0)}else return 0}var o=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo",p=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelSearchReact");function q(a,c){return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],function(){return b("React").createElement("div",{className:o,tabIndex:0,onKeyDown:n,onClick:m},b("React").createElement("div",{className:"_3szp"},b("CurrentUser").isWorkUser()?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("465522"),void 0,void 0,void 0,void 0,[])):b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement("div",{className:"_6ybv"},b("MessengerThreadSearchIconSVGM4React.bs").icon):b("MessengerThreadSearchIconSVGReact.bs").make("_6b45",b("MessengerCustomColorUtils.bs").customColorOrBlue(a))),b("React").createElement("div",{className:"_3szq"},i._("Search in Conversation")))},p[9],p[10],p[11],p[12]]}d=b("ReasonReact.bs").wrapReasonForJs(p,function(a){return q(a.thread,[])});f.BootloadableMessengerContentSearchFunnelLogger=c;f.LoadableMessengerContentSearchFunnelLoggerRe=j;f.handleLoggerLoad=k;f.showQuery=l;f.handleSearchThreadClick=m;f.handleSearchThreadKeyDown=n;f.rowClasses=o;f.component=p;f.make=q;f.jsComponent=d}),null);
__d("MessengerInfoPanelPeopleSectionReact.bs",["ix","cx","fbt","cssVar","Image.bs","React","gkx","asset","LinkReact.bs","immutable","MercuryIDs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessagingTag","bs_js_null_undefined","MessageRequestUtils","MessengerAddIconSVGReact.bs","MessengerAdminGroupUtils","MessengerSortParticipants","MessengerContactListReact.re","MessengerInfoPanelSectionReact.bs","MessengerInfoPanelContactActions.react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelPeopleSectionReact");function a(a,c,d,e,f,h,j,l,m,n,o,p,q){__p&&__p();var r=function(){__p&&__p();if(!c||b("MessageRequestUtils").isMessageRequest(o))return null;else{var a=b("MessengerAdminGroupUtils").shouldInvite(o);a=a?i._("Invite"):i._("Add People");var d=o.solid_color;if(d==null){var e=b("CurrentUser").isWorkUser();e=e?"#373e4c":"#0084ff"}else e=d;d=b("CurrentUser").isWorkUser();d=d?b("React").createElement("div",{className:"_3-8n _3-8u"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("461758"),void 0,void 0,void 0,void 0,[]))):b("ReasonReact.bs").element(void 0,void 0,b("MessengerAddIconSVGReact.bs").make("_4rpi",e,[]));return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,"_4rph",void 0,void 0,void 0,void 0,void 0,void 0,void 0,h,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[d,b("React").createElement("div",{className:"_4rpj"},a)]))}};return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],function(){var c=o.folder===b("MessagingTag").PENDING&&b("gkx")("678620")?n["delete"](b("MercuryIDs").getParticipantIDFromUserID(p)):n;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerInfoPanelSectionReact.bs").make(b("bs_js_primitive").nullable_to_opt(o.solid_color),!0,e,m,i._("People"),[r(0),b("ReasonReact.bs").element(void 0,void 0,b("MessengerContactListReact.re").make(b("MessengerInfoPanelContactActions.react"),b("bs_js_primitive").option_get(a==null?void 0:b("bs_js_primitive").some(a)),"_4wc-",d,!0,f,b("immutable").OrderedMap([[null,b("MessengerSortParticipants").sortAlphabeticalWithAdmins(a==null?b("bs_js_null_undefined").fromOption([]):b("bs_js_null_undefined").fromOption(Object.keys(a)),c)]]),j,l,void 0,p,o,[]))]))},k[9],k[10],k[11],k[12]]}f.component=k;f.make=a}),null);
__d("MessengerInfoPanelPeopleSectionReact.re",["bs_curry","MessengerInfoPanelPeopleSectionReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerInfoPanelPeopleSectionReact.bs").component,function(a){return b("bs_curry").app(b("MessengerInfoPanelPeopleSectionReact.bs").make,[a.admins,a.canViewerReply,a.contactAdapter,a.isCollapsed,a.isViewerSubscribed,a.onAddPeopleClick,a.onContactAction,a.onContactSelect,a.onToggle,a.participants,a.thread,a.viewer,a.children])});f.component=a;f["default"]=a}),null);
__d("MessengerGroupCreateDialog.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{entryPoint:this.props.entryPoint,isShown:this.props.isShown,onClose:this.props.onClose}),loader:b("JSResource")("MessengerGroupCreateDialogImpl.react").__setRef("MessengerGroupCreateDialog.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("WorkchatNotificationsJewelBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";function a(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),null),loader:b("JSResource")("workchatNotificationsJewelReactComponent").__setRef("WorkchatNotificationsJewelBootloader.react"),placeholder:b("React").createElement("div",null)})}e.exports=a}),null);
__d("WorkchatNotificationsJewelBootloaderReact.bs",["ReasonReact.bs","WorkchatNotificationsJewelBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("WorkchatNotificationsJewelBootloader.react"),{},a)}f.make=a}),null);
__d("WorkplaceLogoReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("ReasonReact.bs").statelessComponent("WorkplaceLogoReact");function a(){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var a=h._("Go to Workplace News Feed");return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,a,"_2z9u",void 0,void 0,void 0,void 0,void 0,"/feed",void 0,void 0,void 0,void 0,"button",void 0,void 0,void 0,"_blank",a,[b("React").createElement("span",{className:"_2z9t"},a)]))},i[9],i[10],i[11],i[12]]}f.component=i;f.make=a}),null);
__d("WorkChatMasterViewHeaderReact.bs",["cx","fbt","bs_block","bs_curry","React","gkx","QE2Logger","ReasonReact.bs","MessagingTag","MercuryConfig","MessengerView","MessengerActions","WorkplaceLogoReact.bs","MessengerURIConstants","LinkWithHiddenURLBarReact.bs","MessengerSettingsMenuReact.bs","MessengerDeleteAllMenuReact.bs","MessengerGroupCreateDialogReact.bs","XWorkSaveGroupPurposeController","MessengerGroupCreationEntryPoint","WorkSyncedGroupCreationEntryPoint","WorkchatNotificationsJewelBootloaderReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){a.preventDefault();b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MessengerActions").changeQuery(null);return 0}function a(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").PENDING);return 0}var j="_30yy _2oc8",k="_4kzu",l="_36ic _5l-3",m=b("MessengerGroupCreationEntryPoint").WORK_CHAT_HEADER_NEW_GROUP_BUTTON;function n(a){var c=a[1][0];if(c)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerGroupCreateDialogReact.bs").make(m,!0,function(){return b("bs_curry")._1(a[3],1)},[]));else return null}var o=b("ReasonReact.bs").reducerComponent("WorkChatMasterViewHeaderReact");function c(a,c,d,e,f,g){__p&&__p();var m=function(a){a.preventDefault();e!==b("MessengerView").MASTER.RECENT&&b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT);b("MessengerActions").changeFolder(b("MessagingTag").INBOX);return 0},p=function(){var a=h._("Back to Recent Messages");return b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(a,"_30yy _2oc9",void 0,void 0,void 0,void 0,void 0,void 0,m,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,a,[]))},q;if(c===b("MessagingTag").ACTION_ARCHIVED){g=b("gkx")("762398");q=g?h._("Hidden Chats"):h._("Archived Threads")}else if(c===b("MessagingTag").PENDING)q=h._("Message Requests");else if(c===b("MessagingTag").OTHER){g=b("gkx")("762398");q=g?h._("Permanently Hidden"):h._("Filtered Messages")}else q=e===b("MessengerView").MASTER.PEOPLE?h._("People"):h._("Chat");var r=b("gkx")("678606");return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],function(g){__p&&__p();var m=c!==b("MessagingTag").INBOX||e!==b("MessengerView").MASTER.RECENT?p(0):r?b("ReasonReact.bs").element(void 0,void 0,b("WorkchatNotificationsJewelBootloaderReact.bs").make([])):b("React").createElement("div",{className:k},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSettingsMenuReact.bs").make(a,c,e,f,[]))),o=c!==b("MessagingTag").PENDING&&c!==b("MessagingTag").OTHER;b("QE2Logger").logExposureForUser("workchat_synced_groups_universe",f);var s=function(){if(b("MercuryConfig").WorkSyncedGroupEntryPointEnabled){var a=b("MercuryConfig").WorkSyncedGroupAutoCreateEnabled;a=a?[b("XWorkSaveGroupPurposeController").getURIBuilder().setString("purpose","work_teamwork").setString("ref",b("WorkSyncedGroupCreationEntryPoint").COMPOSE_BUTTON_ON_WORKCHAT).setBool("back_disallowed",!0).getURI(),function(){return 0},"dialog"]:["#",function(){return b("bs_curry")._1(g[3],0)},""];var c=h._("New Group");return b("React").createElement(b("React").Fragment,void 0,n(g),b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(c,"_30yy _6u29",void 0,void 0,void 0,void 0,a[0],void 0,a[1],void 0,void 0,void 0,void 0,a[2],void 0,void 0,void 0,c,[])))}else return null};if(o){var t=h._("New Message");t=b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(t,j,void 0,void 0,void 0,void 0,b("MessengerURIConstants").COMPOSE_SUBPATH,void 0,i,void 0,void 0,void 0,"button",void 0,void 0,0,void 0,t,[]))}else t=b("React").createElement("div",{className:k},b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeleteAllMenuReact.bs").make(a,c,d,f,[])));return b("React").createElement("div",{className:l,role:"banner"},r?b("ReasonReact.bs").element(void 0,void 0,b("WorkplaceLogoReact.bs").make([])):null,m,b("React").createElement("h1",{className:"_1tqi"},q),o?s(0):null,t)},function(){return[!1]},o[10],function(c,a){if(c)return b("bs_block").__(0,[[!1]]);else return b("bs_block").__(0,[[!0]])},o[12]]}f.handleAddClick=i;f.handleFilteredRequestsBackArrowClick=a;f.composeButtonClasses=j;f.settingsMenuClasses=k;f.rootClasses=l;f.entryPoint=m;f.renderDialog=n;f.component=o;f.make=c}),null);
__d("WorkMultiCompanyChatBetaNotice.bs",["cx","fbt","React","gkx","CurrentUser","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("WorkMultiCompanyChatBetaNotice");function a(a,c){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var c=b("gkx")("678587"),d=b("CurrentUser").isWorkUser();if(c&&d&&a)return b("React").createElement("div",{className:"_3eus"},h._("You have early access to multi-company chat"));else return null},i[9],i[10],i[11],i[12]]}f.component=i;f.make=a}),null);
__d("MessengerPage",["EventEmitter","EventEmitterWithHolding","EventHolder","keyMirror","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";a={Events:b("keyMirror")({APP_MOUNTED:null,DATA_INITIALIZED:null,JS_LOADED:null}),addRetroactiveListener:function(a,b){return g.addRetroactiveListener(a,b)},emit:function(a){g.emitAndHold(a,b("performanceAbsoluteNow")())},removeCurrentListener:function(){g.removeCurrentListener()}};var g=new(b("EventEmitterWithHolding"))(new(b("EventEmitter"))(),new(b("EventHolder"))());e.exports=a}),null);
__d("MessengerMDotMeReferralStore",["MessengerActions","MessengerStore"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){"use strict";g.constructor.call(this),this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null}}a.prototype.getState=function(){"use strict";return this.$MessengerMDotMeReferralStore1};a.prototype.__onDispatch=function(a){"use strict";switch(a.type){case b("MessengerActions").Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=a.refCode,this.$MessengerMDotMeReferralStore1.refThreadID=a.refThreadID,this.emitChange()}};e.exports=new a()}),null);
__d("MessengerPromotionDataDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(){g.constructor.call(this,{strict:!0})}e.exports=new a()}),null);
__d("MessengerPromotionDataStore",["FluxStore","MessengerPromotionDataDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerPromotionDataDispatcher")),this.$MessengerPromotionDataStore1=null}a.prototype.getPromotionData=function(){return this.$MessengerPromotionDataStore1};a.prototype.__onDispatch=function(a){switch(a.type){case"SET_PROMOTION_DATA":this.$MessengerPromotionDataStore1!==a.promotionData&&(this.$MessengerPromotionDataStore1=a.promotionData,this.__emitChange());break}};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MercurySearchContextResults",["KeyedCallbackManager","MercuryAPIArgsSource","MercuryIDs","MercuryPayloadSource","MercuryThreadlistConstants","MercuryThreadIDMap","RangedCallbackManager","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MessengerMessageTransformer.bs","WebMessengerConstants"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MercuryThreadIDMap").get(),h=b("MercuryServerPayloadPreprocessor").get(),i=new(b("KeyedCallbackManager"))(),j=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,k=b("WebMessengerConstants").MORE_SEARCH_CONTEXT_COUNT;a={getSearchContext:function(a,c,d){__p&&__p();if(a){var e=i.executeOrEnqueue(a,function(b){b=m(b,a);d(b)}),f=i.getUnavailableResources(e);if(f.length){f={message_id:a,limit:j+1};var h=g.getServerIDFromClientIDNow(c);c=b("MercuryIDs").tokenize(c);c.type=="user"?f.other_user_fbid=h:f.thread_fbid=h;n(f)}return e}},getMoreSearchContext:function(a,c,d,e){__p&&__p();if(a){var f=i.getResource(a);if(f){var h=d==b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP?f.up_message_ids:f.down_message_ids,j=h.getCurrentArraySize()+k,l=h.executeOrEnqueue(0,j,function(){var b=m(f,a);e(b)});h=h.getUnavailableResources(l);if(h.length){h={message_id:a,limit:j,direction:d};j=g.getServerIDFromClientIDNow(c);d=b("MercuryIDs").tokenize(c);d.type=="user"?h.other_user_fbid=j:h.thread_fbid=j;n(h)}return l}}},handleUpdate:function(a){__p&&__p();if(a.graphql_payload){var c=a.graphql_payload.map(function(c){return b("MessengerMessageTransformer.bs").transformMessage(a.viewer,c,a.thread_data,a.for_page)});h.handleUpdate({actions:c,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}c=a.search_context||{};for(var d in c){var e=c[d],f=e.other_user_fbid||e.thread_fbid;f=g.getClientIDFromServerIDNow(f);var m=!i.getResource(d);f=m?{thread_id:f,up_message_ids:new(b("RangedCallbackManager"))(),down_message_ids:new(b("RangedCallbackManager"))()}:i.getResource(d);var n=m?j+1:k;e.up_message_ids&&(f.up_message_ids.getCurrentArraySize()===0||e.up_message_ids.length>=f.up_message_ids.getCurrentArraySize())&&l(f.up_message_ids,e.up_message_ids,n);e.down_message_ids&&(f.down_message_ids.getCurrentArraySize()===0||e.down_message_ids.length>=f.down_message_ids.getCurrentArraySize())&&l(f.down_message_ids,e.down_message_ids,n);m&&i.setResource(d,f)}},unsubscribe:function(a,c,d){if(c){c=i.getResource(c);c?d==b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP?c.up_message_ids.unsubscribe(a):c.down_message_ids.unsubscribe(a):i.unsubscribe(a)}}};function l(a,b,c){var d=a.getCurrentArraySize();d=b.length<d+c;b.length&&(a.removeAllResources(),a.addResourcesWithoutSorting(b,0));d&&a.setReachedEndOfArray()}function m(a,b){var c=a.up_message_ids.hasReachedEndOfArray(),d=a.up_message_ids.getAllResources();c||d.shift();var e=a.down_message_ids.hasReachedEndOfArray(),f=a.down_message_ids.getAllResources();e||f.pop();return{thread_id:a.thread_id,message_id:b,up_message_ids:d,up_exhausted:c,down_message_ids:f,down_exhausted:e}}function n(a){a.client=b("MercuryAPIArgsSource").WEBMESSENGER,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_context.php",a)}b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_context.php":{mode:b("MercuryServerDispatcher").IMMEDIATE,handler:a.handleUpdate}});e.exports=a}),null);
__d("MercurySearchSnippetResults",["MercuryAPIArgsSource","MercuryPayloadSource","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonMixin","MercuryThreadIDMap","MercuryThreadlistConstants","MessengerEnvironment","MessengerServerPayloadTransformer.bs","RangedCallbackManager"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MessengerEnvironment").messengerui?b("MercuryAPIArgsSource").MESSENGER:b("MercuryAPIArgsSource").WEBMESSENGER,h={},i={},j=null,k=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_LIMIT,m=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_MORE;function a(a){"use strict";this.$1=a,this.$2=b("MercuryServerPayloadPreprocessor").getForFBID(a),b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_snippets.php":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){this.handleUpdate(a)}.bind(this)}}),this.$3=b("MercuryThreadIDMap").getForFBID(a)}a.prototype.getFBID=function(){"use strict";return this.$1};a.prototype.getThreadIDMap=function(){"use strict";return this.$3};a.prototype.getAllThreadSearchResults=function(a,b){"use strict";a&&n(this.$1,a,l,0,b)};a.prototype.getAllLocalThreadSearchResults=function(a,b){"use strict";if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,0,c,b)}}};a.prototype.getAllThreadSearchMoreResults=function(a,b){"use strict";if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,m,c,b)}}};a.prototype.getSingleThreadSearchResults=function(a,b,c){"use strict";if(!a||!b)return;o.call(this,a,b,k,0,c)};a.prototype.getSingleThreadSearchMoreResults=function(a,b,c){"use strict";__p&&__p();if(!a||!b)return;if(!i[b])return;var d=i[b][a];if(d){var e=d.num_total_snippets;d=d.snippets_cbm.getCurrentArraySize();e=e-d;if(e>0){e=e>m?m:e;o.call(this,a,b,e,d,c)}}};a.prototype.countSnippetsMatchingQueryInThread=function(a,b){"use strict";b=i[b][a];if(b)return b.num_total_snippets};a.prototype.findIndexOfSnippet=function(a,b,c,d){"use strict";d=t(a,b);a=d.getAllResources();for(var b=0;b<a.length;b++)if(c===a[b].message_id)return b};a.prototype.findSnippetAtIndex=function(a,b,c,d){"use strict";q(a,b,c),r.call(this,a,b,c,d)};a.prototype.handleUpdate=function(a){"use strict";__p&&__p();if(a.graphql_payload){var c=(a.graphql_payload.message_threads||[]).map(function(c){return b("MessengerServerPayloadTransformer.bs").transformThread(this.$1,c,a.is_page)}.bind(this));this.$2.handleUpdate({threads:c,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}else a.mercury_payload&&this.$2.handleUpdate(a.mercury_payload);var d=a.search_snippets||{};Object.keys(d).filter(function(a){return!!d[a]}).forEach(function(a){Object.keys(d[a]).forEach(function(b){if(!d[a][b].snippets)return;d[a][b].snippets.forEach(function(a){a.matched_keywords=p(a.matched_keywords)})})});c=a.offset;var e=[];for(var f in d){var g=d[f];for(var h in g){var j=g[h],k=a.other_user_fbid||a.thread_fbid,l=this.$3.getClientIDFromServerIDNow(h),m=j.snippets,n=t(f,l),o=n.getCurrentArraySize();if(!k){e.push(l);if(o)continue}else if(c!=o)continue;l=i[l][f];l.num_total_snippets=j.num_total_snippets;j=m?m.length:0;j>0&&n.addResourcesWithoutSorting(m,o);(!k||a.limit>j)&&(n.getCurrentArraySize()==l.num_total_snippets&&n.setReachedEndOfArray())}if(!k){m=s(f);o=m.getCurrentArraySize();c==o&&(m.addResourcesWithoutSorting(e,o),a.limit>e.length&&m.setReachedEndOfArray())}}};function n(a,b,c,d,e){__p&&__p();if(j&&!j.thread_id){var f=s(j.query);f.unsubscribe(j.subscriber_id);j=null}var f=s(b),g=d+c;g=f.executeOrEnqueue(0,g,function(a){var c={};for(var d=0;d<a.length;d++){var g=a[d],h=i[g][b];c[g]={num_total_snippets:h.num_total_snippets,snippets:h.snippets_cbm.getAllResources()}}g=f.hasReachedEndOfArray();e(c,g)});var h=f.getUnavailableResources(g);if(h.length){j={query:b,thread_id:null,subscriber_id:g};h={query:b,offset:d,limit:c+1,snippetLimit:k};h.identifier="thread_fbid";u(h,a)}}function o(a,b,c,d,e){__p&&__p();if(j&&j.thread_id){var f=t(j.query,j.thread_id);f.unsubscribe(j.subscriber_id);j=null}var f=t(a,b),g=d+c;g=f.executeOrEnqueue(0,g,function(){var d=f.getAllResources(),c=i[b][a].num_total_snippets;e(d,c)});var h=f.getUnavailableResources(g);if(h.length){j={query:a,thread_id:b,subscriber_id:g};h=this.getThreadIDMap().getServerIDFromClientIDNow(b);g={query:a,snippetOffset:d,snippetLimit:c,thread_fbid:h,identifier:"thread_fbid"};u(g,this.getFBID())}}function p(a){if(a instanceof Array){var b={};for(var c=0;c<a.length;c++)b[c.toString()]=a[c];return b}else return a}function q(a,b,c){}function r(a,b,c,d){__p&&__p();var e=i[b][a],f=e.snippets_cbm.getAllResources();e=e.num_total_snippets;var g=f.length;if(c<g){d(f[c].message_id);return}f=e-g;e=f>m?m:f;o.call(this,a,b,e,g,function(e,f){r.call(this,a,b,c,d)})}function s(a){h[a]||(h[a]=new(b("RangedCallbackManager"))());return h[a]}function t(a,c){i[c]||(i[c]={});var d=i[c][a];d||(d={num_total_snippets:-1,snippets_cbm:new(b("RangedCallbackManager"))()},i[c][a]=d);return d.snippets_cbm}function u(a,c){a.client=g,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_snippets.php",a,null,c)}Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MessengerThreadSearchStore",["cx","Bootloader","ImmutableObject","MercurySearchContextResults","MercurySearchSnippetResults","MessengerActions","MessengerComposerSteps","MessengerComposerStore","MessengerContentSearchFunnelLoggerConstants","MessengerDispatcher","MessengerState.bs","MessengerStore","MessengerThreadSearchActions","MessengerURIStore","MessengerView","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("immutable").List;c=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS;var j=c.BROWSE_CONTEXT,k=c.BROWSE_MESSAGE_IN_THREAD,l=c.LOAD_MORE_THREADS,m=c.LOAD_MESSAGE_IN_THREAD,n=c.SELECT_THREAD,o=c.THREAD_IMPRESSIONS,p={activeThreadID:null,downExhausted:null,loading:!1,messages:null,query:null,results:i(),selectedIndex:0,threadID:null,totalCount:0,upExhausted:null,threads:null,threadsExhausted:null,mid:null};d=babelHelpers.inherits(a,b("MessengerStore"));h=d&&d.prototype;function a(){h.constructor.call(this),this.$MessengerThreadSearchStore2=p}a.prototype.getForFBID=function(a){this.$MessengerThreadSearchStore1=a,this.$MessengerThreadSearchStore3=new(b("MercurySearchSnippetResults"))(a)};a.prototype.getState=function(){return this.$MessengerThreadSearchStore2};a.prototype.__onDispatch=function(a){__p&&__p();if(!this.$MessengerThreadSearchStore3)return;b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var c=b("MessengerURIStore").getState(),d=c.activeThreadID,e=c.masterView,f=c.mid,g=c.query;c=e===b("MessengerView").MASTER.SEARCH;switch(a.type){case b("MessengerActions").Types.REPLACE_STATE:if(f!=this.$MessengerThreadSearchStore2.mid&&d!=this.$MessengerThreadSearchStore2.activeThreadID){f&&d?(this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{threadID:d,mid:f}),b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore6(),this.$MessengerThreadSearchStore2.threadID,function(a){return this.setMessages(a)}.bind(this))):(this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore2=p);return}else(this.$MessengerThreadSearchStore2.query!==g||this.$MessengerThreadSearchStore2.threadID!==d)&&(g&&!f?b("MessengerComposerStore").getState().step!==b("MessengerComposerSteps").NULL?this.$MessengerThreadSearchStore8():(this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0}),this.$MessengerThreadSearchStore3.getSingleThreadSearchResults(g,d,function(a,b){this.$MessengerThreadSearchStore9({name:n,thread_id:d,has_results:b?b>0:!1}),this.accumulateSearchResultsAndEmitChange(g,d,0,a,b)}.bind(this))):this.$MessengerThreadSearchStore8(),c?(this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0}),g!==this.$MessengerThreadSearchStore2.query?(this.$MessengerThreadSearchStore5=Date.now(),this.$MessengerThreadSearchStore3.getAllThreadSearchResults(g,function(a,b){this.setAllThreadResults(a,b);b=Object.keys(a);this.$MessengerThreadSearchStore9({name:o,threads:b})}.bind(this))):(this.$MessengerThreadSearchStore5=Date.now(),this.$MessengerThreadSearchStore3.getAllLocalThreadSearchResults(g,function(a,b){return this.setAllThreadResults(a,b)}.bind(this)))):this.$MessengerThreadSearchStore10(),this.emitChange());break;case b("MessengerThreadSearchActions").Types.CHANGE_RESULT_INDEX:var h=Math.max(Math.min(this.$MessengerThreadSearchStore2.totalCount-1,this.$MessengerThreadSearchStore2.selectedIndex+a.delta),0);if(h===this.$MessengerThreadSearchStore2.selectedIndex)break;h>=this.$MessengerThreadSearchStore2.results.size?(this.$MessengerThreadSearchStore9({name:k,thread_id:this.$MessengerThreadSearchStore2.threadID}),this.$MessengerThreadSearchStore5=Date.now(),this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0}),this.$MessengerThreadSearchStore3.getSingleThreadSearchMoreResults(g,d,function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.accumulateSearchResultsAndEmitChange.apply(this,[g,d,h].concat(b))}.bind(this))):(this.$MessengerThreadSearchStore5=Date.now(),this.$MessengerThreadSearchStore9({name:k,thread_id:this.$MessengerThreadSearchStore2.threadID}),this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0,selectedIndex:h}),b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore6(),this.$MessengerThreadSearchStore2.threadID,function(a){return this.setMessages(a)}.bind(this)));this.emitChange();e=this.$MessengerThreadSearchStore2.results.get(h);this.$MessengerThreadSearchStore9({name:m,mid:e.message_id,thread_id:this.$MessengerThreadSearchStore2.threadID,latency:Date.now()-this.$MessengerThreadSearchStore5});break;case b("MessengerThreadSearchActions").Types.GET_MORE_CONTEXT:this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0});b("MercurySearchContextResults").getMoreSearchContext(this.$MessengerThreadSearchStore6(),this.$MessengerThreadSearchStore2.threadID,a.direction,function(a){this.setMessages(a),this.$MessengerThreadSearchStore9({name:j})}.bind(this));this.emitChange();break;case b("MessengerThreadSearchActions").Types.GET_MORE_THREADS:this.$MessengerThreadSearchStore4=Date.now();this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{loading:!0});this.$MessengerThreadSearchStore3.getAllThreadSearchMoreResults(g,function(a,b){this.$MessengerThreadSearchStore9({name:l,threads:Object.keys(a),latency:Date.now()-this.$MessengerThreadSearchStore4}),this.setAllThreadResults(a,b)}.bind(this));this.emitChange();break}};a.prototype.setAllThreadResults=function(a,c){__p&&__p();var d=Object.keys(a);d=d.map(function(c){c=b("MessengerState.bs").getThreadMetaNow(this.$MessengerThreadSearchStore1,c);if(!c)return;var d=a[c.thread_id];if(!d)return;return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{snippetCount:d.num_total_snippets}))}.bind(this)).filter(Boolean);this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{threads:d,threadsExhausted:c,loading:!1});this.emitChange()};a.prototype.$MessengerThreadSearchStore10=function(){this.$MessengerThreadSearchStore11(["threads","threadsExhausted","loading"])};a.prototype.accumulateSearchResultsAndEmitChange=function(a,c,d,e,f){this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{query:a,threadID:c,selectedIndex:d||0,results:i(e),totalCount:f||0});if(this.$MessengerThreadSearchStore2.results.size){b("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore6(),this.$MessengerThreadSearchStore2.threadID,function(a){return this.setMessages(a)}.bind(this));a=this.$MessengerThreadSearchStore2.results.get(this.$MessengerThreadSearchStore2.selectedIndex);this.$MessengerThreadSearchStore9({name:m,mid:a.message_id,thread_id:this.$MessengerThreadSearchStore2.threadID,latency:Date.now()-this.$MessengerThreadSearchStore5})}else this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{messages:null});this.emitChange()};a.prototype.$MessengerThreadSearchStore8=function(){this.$MessengerThreadSearchStore7(),this.$MessengerThreadSearchStore11(["query","threadID","selectedIndex","results","totalCount","downExhausted","loading","messages","upExhausted"])};a.prototype.$MessengerThreadSearchStore11=function(a){a=a.reduce(function(a,b){a[b]=p[b];return a},{});this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,a)};a.prototype.setMessages=function(a){__p&&__p();var c=b("MessengerState.bs").getMessagesFromIDs(this.$MessengerThreadSearchStore1,[].concat(a.up_message_ids,a.message_id,a.down_message_ids)).map(function(c){if(c&&c.message_id===a.message_id)if(!this.$MessengerThreadSearchStore2.results.isEmpty()){var d=this.$MessengerThreadSearchStore2.results.get(this.$MessengerThreadSearchStore2.selectedIndex),e=d.matched_keywords,f=c.body.indexOf(d.body);d=Object.keys(d.matched_keywords).map(function(a){return{offset:f+Number(a),length:e[a].length,entity:{url:""},className:"__in"}});return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{ranges:c.ranges?c.ranges.concat(d):d}))}else return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{isSelected:!0}));return c}.bind(this)).map(function(a){return new(b("ImmutableObject"))(a)});this.$MessengerThreadSearchStore2=babelHelpers["extends"]({},this.$MessengerThreadSearchStore2,{downExhausted:a.down_exhausted,loading:!1,messages:i(c),upExhausted:a.up_exhausted});this.emitChange()};a.prototype.$MessengerThreadSearchStore6=function(){return this.$MessengerThreadSearchStore2.mid||this.$MessengerThreadSearchStore2.results.get(this.$MessengerThreadSearchStore2.selectedIndex).message_id};a.prototype.$MessengerThreadSearchStore7=function(){if(this.$MessengerThreadSearchStore2.messages){var a=this.$MessengerThreadSearchStore2.messages.map(function(a){return a.message_id}).toArray();b("MessengerState.bs").invalidateSearchedMessages(this.$MessengerThreadSearchStore1,a)}};a.prototype.$MessengerThreadSearchStore9=function(a){__p&&__p();b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(b){__p&&__p();if(b&&a)switch(a.name){case k:b.browseMessageInThread(a.thread_id);break;case l:b.logLoadMoreThreads(a.threads,a.latency);break;case n:b.logThreadSelect(a.thread_id,a.has_results);break;case m:b.loadMessageInThread(a.mid,a.thread_id,a.latency);break;case o:b.logThreadImpressions(a.threads);break;case j:b.logContextBrowse();break}},"MessengerThreadSearchStore")};e.exports=new a()}),null);
__d("MessengerURIListener",["MessengerActions","MessengerURISerializer","PageTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1;a={start:function(){g||b("PageTransitions").registerHandler(h,6),g=!0},stop:function(){b("PageTransitions").removeHandler(h,6),g=!1}};function h(a){a=b("MessengerURISerializer").deserialize(a);if(a.notMessenger)return!1;b("PageTransitions").transitionComplete();b("MessengerActions").changeState(a);return!0}e.exports=a}),null);
__d("FourLetterMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){"use strict";a=3;c="\\b[a-z][^\\s"+b("DocumentMentionsRegex").PUNCTUATION+"]";var g=new RegExp("(^|[^#])((?:"+c+"{"+a+",})$)");d={name:"FourLetterMentionsStrategy",findMentionableString:function(a){a=g.exec(a);return a!==null?{matchingString:a[2],leadOffset:a[2].length}:null}};e.exports=d}),null);
__d("MessengerEmojiUsageUtils",["MessengerSupportedEmojiUtils","Utf16"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=65039;a={findAllEmojis:function(a){__p&&__p();var c=[];a=b("MessengerSupportedEmojiUtils").parse(a);a.forEach(function(a){var d=[];a.emoji.forEach(function(a){a=b("Utf16").decode(a);a&&d.push(a)});d[d.length-1]===g&&d.pop();c.push(d)});return c}};e.exports=a}),null);
__d("ReasonBootloadOnInteraction.react",["React","ReasonBootloadOnRender.react"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={hadUserInteraction:!1},this.$1=function(){this.setState({hadUserInteraction:!0})}.bind(this),b}a.prototype.render=function(){"use strict";if(!this.state.hadUserInteraction)return b("React").cloneElement(this.props.placeholder,{onFocus:this.$1,onMouseOver:this.$1,onClick:this.$1});var a=this.props,c=a.loader,d=a.component;a=a.placeholder;return b("React").createElement(b("ReasonBootloadOnRender.react"),{placeholder:a,loader:c,component:d})};e.exports=a}),null);
__d("MercurySendMessageHandler",["MercuryMessageActions","MercuryMessageObject","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.$1=a,this.$2=b("MercuryMessageActions").getForFBID(this.$1),this.$3=b("MercuryMessageObject").getForFBID(this.$1)}a.prototype.sendPlainTextMessage=function(a,b,c){b=this.$3.constructUserGeneratedMessageObject(b,c,a);this.$2.send(b)};a.prototype.sendSticker=function(a,b,c){b=this.$3.constructStickerMessageObject(b,c,a);this.$2.send(b)};a.prototype.sendAttachment=function(a,b,c){c=this.$3.constructAttachmentMessageObject(c,a);this.$2.addAttachmentPlaceholder(c,b.upload_id,b)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryThreadlistContainer.react",["LogHistory","MercuryAPIArgsSource","MercuryFilters.bs","MercuryServerRequests","MercuryThreadlistConstants","MessagingTag","MessengerConfig","MessengerState.bs","React","SubscriptionsHandler","emptyFunction","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h="search";d=3;var i=5e3,j=b("MercuryThreadlistConstants").JEWEL_THREAD_COUNT+d,k=b("LogHistory").getInstance("threadlist_container");function l(a,b,c){a=a[b];return a?a[c]:null}function m(a,b,c){a=l(a,b,c);return a?a.reachedEnd:!1}f=babelHelpers.inherits(a,b("React").Component);g=f&&f.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={isLoading:null,isSearching:!1,unreadMessageRequestThreads:[],threads:b("immutable").Map(),pinnedThreads:[]},this.$4=function(){var a=function(){this.setState({suspended:!1}),this.handleThreadListUpdate()}.bind(this);b("gkx")("678640")&&(this.setState({suspended:!0}),setTimeout(a,i))}.bind(this),this.$7=function(){!this.state.isSearching&&!this.state.isLoading&&!m(this.props.threadlistOrderMap,this.props.folder,this.props.filter)&&this.$12(this.props.folder,this.props.filter,b("MercuryThreadlistConstants").JEWEL_MORE_COUNT+1)}.bind(this),this.$9=function(a,c){this.setState({searchThreads:[]},function(){return this.$2(h,b("MercuryFilters.bs").all,a)}.bind(this))}.bind(this),this.$8=function(a){this.setState({isSearching:!!a})}.bind(this),c}a.prototype.componentDidMount=function(){this.$1(this.props.threadlistOrderMap,this.props.folder,this.props.filter),this.$2(this.props.folder,this.props.filter)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){(a.folder!==this.props.folder||a.filter!==this.props.filter)&&this.$1(a.threadlistOrderMap,a.folder,a.filter);var b=this.state.isLoading;if(b&&a.folder===b.folder&&a.filter===b.filter){var c=l(a.threadlistOrderMap,a.folder,a.filter);(c&&c.threadlist.length>=b.limit||m(a.threadlistOrderMap,a.folder,a.filter))&&this.setState({isLoading:null})}this.$2(a.folder,a.filter)};a.prototype.componentWillUnmount=function(){this.$3()};a.prototype.handleThreadListUpdate=function(){this.$2(this.props.folder,this.props.filter)};a.prototype.$5=function(){var a=l(this.props.threadlistOrderMap,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread);return!a?[]:a.threadlist.map(function(a){return this.props.threads[a]}.bind(this))};a.prototype.$6=function(a){return this.state.isSearching?this.state.threads.get(h)||[]:this.state.threads.get(a)||[]};a.prototype.render=function(){var a=this.props,c=a.ChildClass,d=a.folder,e=a.filter,f=a.threadlistOrderMap;a=babelHelpers.objectWithoutPropertiesLoose(a,["ChildClass","folder","filter","threadlistOrderMap"]);var g=this.$6(d,e);return b("React").createElement(c,babelHelpers["extends"]({},a,{filter:e,folder:d,isLoaded:m(f,d,e),isLoading:!!this.state.isLoading,isSearching:this.state.isSearching,maxHeight:this.props.maxHeight,newMessageRequestThreads:this.$5(),onRenderThreads:this.props.onRenderThreads,onMessageRequestsClick:this.props.onMessageRequestsClick,pendingFolderUnseenCount:this.props.pendingFolderUnseenCount,threads:g,pinnedThreads:this.state.pinnedThreads,onLoadMoreRequest:this.$7,onQuery:this.$8,onSearchResults:this.$9,maxInitialThreadCount:j,handleChatTabOpen:this.props.source==="jewel"&&b("gkx")("678640")?this.$4:b("emptyFunction")}))};a.prototype.$1=function(a,c,d){c===b("MessagingTag").INBOX&&(b("gkx")("678596")||this.props.source!==b("MercuryAPIArgsSource").JEWEL)&&this.$10(),!this.$11(c,d,a)?this.$12(c,d,j):this.state.isLoading?this.setState({isLoading:null},function(){this.$2(c,d)}.bind(this)):this.$2(c,d)};a.prototype.$10=function(){if(m(this.props.threadlistOrderMap,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread))return;b("MercuryServerRequests").getForFBID(this.props.viewer).fetchThreadlistInfo(0,b("MercuryThreadlistConstants").MAX_UNREAD_COUNT,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread,this.props.source,null)};a.prototype.$13=function(a,b){var c=l(this.props.threadlistOrderMap,a,b);c=c?c.threadlist:[];c=c&&c.length>0?c[c.length-1]:null;if(!c)return null;c=this.props.threads[c];var d=c?c.timestamp:null;a==="inbox"&&b==="all"&&k.debug("load threads after timestamp "+d,c?c.thread_id:null);return d};a.prototype.$12=function(a,c,d){var e=function(){b("MercuryServerRequests").getForFBID(this.props.viewer).fetchThreadlistInfo(b("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,d,a,c===b("MercuryFilters.bs").all?null:c,this.props.source,this.$13(a,c))}.bind(this);this.setState({isLoading:{folder:a,filter:c,limit:d}},e)};a.prototype.$2=function(a,c,d){this.$3();c=l(this.props.threadlistOrderMap,a,c);var e=d||(c?c.threadlist:[]);d=[].concat.apply([],e);this.$14=b("MessengerState.bs").getMultiThreadMeta(this.props.viewer,d,function(b){this.setState({threads:this.state.threads.set(a,this.$15(e,b))})}.bind(this));this.$16()};a.prototype.$16=function(){var a=b("MessengerState.bs").getPinnedThreadlist(this.props.viewer);b("MessengerConfig").MPT>0&&a.reverse();b("MessengerState.bs").getMultiThreadMeta(this.props.viewer,a,function(b){this.setState({pinnedThreads:this.$15(a,b)})}.bind(this))};a.prototype.$15=function(a,b){return a.map(function(a){if(Array.isArray(a))return a.map(function(a){return b[a]});else return b[a]})};a.prototype.$17=function(){var a=l(this.props.threadlistOrderMap,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread),c=a?a.threadlist:[];b("MessengerState.bs").getMultiThreadMeta(this.props.viewer,c,function(a){this.setState({unreadMessageRequestThreads:c.map(function(b){return a[b]})})}.bind(this))};a.prototype.$11=function(a,b,c){var d=j,e=l(c,a,b);return!!(e&&(e.threadlist.length>=d||m(c,a,b)))};a.prototype.$3=function(){this.$14&&b("MessengerState.bs").unsubscribeThread(this.props.viewer,this.$14)};a.propTypes={blockedIds:c.any,ChildClass:c.func.isRequired,filter:c.string.isRequired,folder:c.string.isRequired,maxHeight:c.number,onMessageRequestsClick:c.func,onRenderThreads:c.func,pendingFolderUnseenCount:c.number,showCount:c.bool,showPresence:c.bool,source:c.string,threadCount:c.number,threadIDs:c.array,threads:c.object.isRequired,threadlistOrderMap:c.object.isRequired,viewer:c.string.isRequired};a.defaultProps={source:b("MercuryAPIArgsSource").JEWEL};e.exports=a}),null);
__d("createContentStateForTextWithMessengerEmoji",["ContentState","DraftModifier","MessengerSupportedEmojiUtils","insertMessengerEmojiIntoContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=b("ContentState").createFromText("");while(a){var d=b("MessengerSupportedEmojiUtils").getEmojiMatchObj(a);if(d){var e=d.offset+d.length,f=a.substr(0,d.is_supported?d.offset:e);e=a.substr(e);c=b("DraftModifier").insertText(c,c.getSelectionAfter(),f);d.is_supported&&(c=b("insertMessengerEmojiIntoContentState")(d.emoji_key,c,c.getSelectionAfter(),c.getFirstBlock().getInlineStyleAt(0)));a=e}else break}a&&(c=b("DraftModifier").insertText(c,c.getSelectionAfter(),a));return c}e.exports=a}),null);
__d("AtSignAllowEmptyMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){__p&&__p();a=b("DocumentMentionsRegex").PUNCTUATION;c=["@","\\uff20"].join("");d="[^"+c+a+"\\s]";f="(?:\\.[ |$]| |["+a+"]|)";var g=new RegExp("(?:^|\\s|[(\\/])(["+c+"]((?:"+d+f+"){0,20}))$");b={name:"AtSignAllowEmptyMentionsStrategy",findMentionableString:function(a){a=g.exec(a);if(a!==null){var b=a[2];return{matchingString:b,leadOffset:a[1].length}}return null}};e.exports=b}),null);
__d("createMentionsSearchSourceFromParticipants",["fbt","ix","AtSignAllowEmptyMentionsStrategy","CapitalizedNameMentionsStrategy","DocumentCompositeMentionsSource","DocumentMentionsSource","FourLetterMentionsStrategy","LogHistory","SearchableEntry","StaticSearchSource","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("LogHistory").getInstance("messenger_mentions"),j=h("91674").uri,k=171602870233241;function a(a,c,d,e,f){__p&&__p();if(!a||!c)return null;var g=null,h=[];c.length<=2?f&&(g=[n()]):(g=c.reduce(function(c,e){if(!e||e.fbid===a)return c;var f=d&&d.custom_nickname&&d.custom_nickname[e.fbid]?d.custom_nickname[e.fbid]:"";c.push(new(b("SearchableEntry"))({uniqueID:e.fbid,title:"@"+e.name,subtitle:f,photo:e.image_src,keywordString:f}));return c},[]),h=[].concat(g),f&&g.push(n()),e&&d&&d.thread_fbid&&(g.push(l(d.thread_fbid)),g.push(m(d.thread_fbid))));if(g===null)return null;f=new(b("StaticSearchSource"))(g);e=new(b("StaticSearchSource"))(h);i.debug("constructed_search_source",JSON.stringify({participants:c.map(function(a){return a&&a.fbid})}));return new(b("DocumentCompositeMentionsSource"))([new(b("DocumentMentionsSource"))(b("AtSignAllowEmptyMentionsStrategy"),f),new(b("DocumentMentionsSource"))(b("CapitalizedNameMentionsStrategy"),e),new(b("DocumentMentionsSource"))(b("FourLetterMentionsStrategy"),e)])}function l(a){var c=g._("everyone").toString(),d=g._("Mention everyone in this chat").toString();return new(b("SearchableEntry"))({photo:j,title:"@"+c,uniqueID:b("nullthrows")(a),subtitle:d})}function m(a){var c=g._("here").toString(),d=g._("Mention everyone in this chat who is active").toString();return new(b("SearchableEntry"))({photo:j,title:"@"+c,uniqueID:b("nullthrows")(a)+"-active",subtitle:d})}function n(){var a=g._("M").toString(),c=g._("Messenger Assistant").toString();return new(b("SearchableEntry"))({photo:h("581082").uri,title:"@"+a,uniqueID:k,subtitle:c})}e.exports=a}),null);
__d("createMessengerMentionTypeaheadDraftEntity",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.createEntity("ASSISTANT_TYPEAHEAD","SEGMENTED",{mid:b.getUniqueID()})}e.exports=a}),null);
__d("handlePastedTextForMessengerEmoji",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){c=c-a;a=e.getSelection();a.isCollapsed()||(c+=1+a.getEndOffset()-a.getStartOffset());if(c<=0)return e;d=d.slice(0,c);c=a.isCollapsed()?b("DraftModifier").insertText(e.getCurrentContent(),a,d,e.getCurrentInlineStyle()):b("DraftModifier").replaceText(e.getCurrentContent(),a,d,e.getCurrentInlineStyle());return b("EditorState").push(e,c,"insert-characters")}e.exports=a}),null);
__d("MercuryCanonicalGroupThreadActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({THREAD_SEARCH_UPDATED:null})}),null);
__d("MercuryCanonicalGroupThreadStore",["FluxStore","MercuryCanonicalGroupThreadActionTypes","MercuryCanonicalGroupThreadManager","MessengerDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerDispatcher")),this.$MercuryCanonicalGroupThreadStore1=b("MercuryCanonicalGroupThreadManager").get()}a.prototype.__onDispatch=function(a){a=a.type;switch(a){case b("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED:this.__emitChange();break;default:break}};a.prototype.getOrFetch=function(a){var c=this.$MercuryCanonicalGroupThreadStore1.getNow(a);c||this.$MercuryCanonicalGroupThreadStore1.getCanonicalGroupThreadIDForParticipants(a,function(){b("MessengerDispatcher").dispatch({type:b("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED})});return c};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MessengerThreadListLoggerUtil",["MessagingTag","MessengerWebQuickLogModule","QuickPerformanceLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map(),h=1;function i(a,c){return!a||!a.includes(b("MessagingTag").INBOX.toUpperCase())?null:c==null?b("MessengerWebQuickLogModule").FETCH_THREAD_LIST:b("MessengerWebQuickLogModule").FETCH_MORE_THREAD_LIST}function j(a,b,c){return[].concat(a||[],[b,c]).filter(Boolean).join("_")}function a(a,c,d){var e=i(a,c);if(!e)return;b("QuickPerformanceLogger").markerStart(e,h);g.set(j(a,c,d),h);h++}function c(a,c,d,e){var f=i(a,c);if(!f)return;a=j(a,c,d);c=g.get(a);c!=null&&(b("QuickPerformanceLogger").markerEnd(f,e,c),g["delete"](a))}e.exports={markerStart:a,markerEnd:c}}),null);
__d("MercuryReadOnlyReason",["fbt","Link.react","MercuryConfig","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getReason:function(a){__p&&__p();a===void 0&&(a=!1);if(a){a=b("MercuryConfig").DYIDeepLink;return g._("Sorry, this conversation isn't active anymore because messages can no longer be sent to email addresses. After May 1st 2016, conversations with email addresses will only be available in a copy of your Facebook data. {download your information}",[g._param("download your information",b("React").createElement("a",{href:a},g._("Learn More")))])}else if(b("MercuryConfig").ViewerIsReadOnly)return g._("You're temporarily blocked from sending messages. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else if(b("MercuryConfig").ColdOpenBlock)return g._("You're temporarily blocked from starting new conversations. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else return g._("You cannot reply to this conversation.")}};e.exports=a}),null);
__d("MNCommercePromotionManageBlockDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MNCommercePromotionManageBlockDialogContainer.react").__setRef("MNCommercePromotionManageBlockDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MNBotsLoggerEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BOT_COMPOSER_MENU_ICON_DISPLAYED:"bot_composer_menu_icon_displayed",BOT_COMPOSER_MENU_ICON_TAPPED:"bot_composer_menu_icon_tapped",BOT_COMPOSER_MENU_ITEM_DID_SELECT:"bot_composer_menu_item_did_select",BOT_COMPOSER_QUICK_REPLY_DISPLAYED:"bot_composer_quick_reply_displayed",BOT_COMPOSER_QUICK_REPLY_TAPPED:"bot_composer_quick_reply_tapped"})}),null);
__d("MessengerBotMenuButton.react",["AutoFocusableLink.react","BootloadOnRender.react","ChatFlyoutPlaceholder.react","JSResource","LazyComponent.react","MessengerBotMenuDataFetcher","MessengerBotsWebTypedLogger","MessengerContextualDialog.react","MessengerEnvironment","MNBotsLoggerEvents","React","XUIContextualDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=302,i=280;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.state={flyoutOpen:!!this.props.clicked,isLoading:!1,menuItems:null},this.$3=function(){this.setState({flyoutOpen:!1})}.bind(this),this.$7=function(){this.state.flyoutOpen&&this.$3()}.bind(this),this.$5=function(){this.$1=this.state.flyoutOpen}.bind(this),this.$4=function(a){a.stopPropagation();if(this.state.flyoutOpen||this.$1)return;this.state.menuItems===null&&(this.setState({isLoading:!0}),this.$2());this.setState({flyoutOpen:!this.state.flyoutOpen})}.bind(this),b}a.prototype.UNSAFE_componentWillMount=function(){this.state.flyoutOpen&&this.state.menuItems===null&&(this.setState({isLoading:!0}),this.$2())};a.prototype.componentDidMount=function(){new(b("MessengerBotsWebTypedLogger"))().setEvent(b("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ICON_DISPLAYED).setPageID(this.props.pageID).log()};a.prototype.componentWillUnmount=function(){this.state.flyoutOpen&&this.$3()};a.prototype.render=function(){return b("React").createElement("span",null,b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:this.props.className,href:"#",onClick:this.$4,onMouseDown:this.$5,role:"button",ref:"link"}),this.$6())};a.prototype.$6=function(){if(!this.state.flyoutOpen)return null;var a=b("MessengerEnvironment").messengerui,c=a?h:i;a=a?b("MessengerContextualDialog.react"):b("XUIContextualDialog.react");return b("React").createElement(a,babelHelpers["extends"]({alignment:this.props.flyoutAlignment,width:c,position:"above",contextRef:function(){return this.refs.link}.bind(this),onBeforeHide:this.$7,onBlur:this.$3,shown:this.state.flyoutOpen},this.props,{key:"contextualDialog"}),b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onEscKeyDown:this.$3,shown:this.state.flyoutOpen,isLoading:this.state.isLoading,menuItems:this.state.menuItems,pageID:this.props.pageID,threadID:this.props.threadID,onClick:this.$3}),loader:b("JSResource")("MessengerBotMenuDialog.react").__setRef("MessengerBotMenuButton.react"),placeholder:b("React").createElement(b("ChatFlyoutPlaceholder.react"),null)}))};a.prototype.$2=function(){b("MessengerBotMenuDataFetcher").getMenuItems(this.props.pageID,function(a){this.setState({menuItems:a,isLoading:!1})}.bind(this),function(){this.setState({menuItems:[],isLoading:!1})}.bind(this))};a.propTypes={autoFocus:c.bool,className:c.string,clicked:c.bool,flyoutAlignment:c.string.isRequired,threadID:c.string.isRequired,pageID:c.string.isRequired};e.exports=a}),null);
__d("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1570574486349284"};c.getQueryID=function(){"use strict";return"389945858066688"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MNPlatformClickSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"UNKNOWN",ATTACHMENT_ATTRIBUTION_ICON:"ATTACHMENT_ATTRIBUTION_ICON",GAMES_SCREENSHOT_ATTACHMENT:'GAMES_SCREENSHOT_ATTACHMENT"',GAMES_SEARCH:"GAMES_SEARCH",GAMES_SHARE_ATTACHMENT:"GAMES_SHARE_ATTACHMENT",GIF_ATTRIBUTION:"GIF_ATTRIBUTION",LANDING_PAGE_GETTING_STARTED:"LANDING_PAGE_GETTING_STARTED",M_SUGGESTION:"M_SUGGESTION",MORE_DRAWER_CHAT_EXTENSION:"MORE_DRAWER_CHAT_EXTENSION",MORE_DRAWER_CHAT_EXTENSION_SEEMORE:"MORE_DRAWER_CHAT_EXTENSION_SEEMORE",MORE_DRAWER_PAGES_CHAT_EXTENSION:"MORE_DRAWER_PAGES_CHAT_EXTENSION",MUSIC_ATTACHMENT:"MUSIC_ATTACHMENT",PLATFORM_GENERIC_ATTACHMENT:"PLATFORM_GENERIC_ATTACHMENT",PLATFORM_MEDIA_ATTACHMENT:"PLATFORM_MEDIA_ATTACHMENT",PLATFORM_MENU:"PLATFORM_MENU",QUICK_REPLY:"QUICK_REPLY",THREAD_SETTING:"THREAD_SETTING",THREAD_VIEW_MESSAGE:"THREAD_VIEW_MESSAGE",UNSUPPORTED_OR_NOT_RECOGNIZED:"UNSUPPORTED_OR_NOT_RECOGNIZED"})}),null);
__d("XMNCommerceCTAPostProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/cta/postprocess/",{cta_id:{type:"String",required:!0},message_id:{type:"String"}})}),null);
__d("MNCommerceCTAProcessor",["AsyncRequest","CurrentUser","GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation","MessengerPlatformClientTypedLogger","MNPlatformClickSource","PopupWindow","XMNCommerceCTAPostProcessController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.process=function(a,c){c===void 0&&(c=null);var d=b("PopupWindow").open("",500,1024);a=b("XMNCommerceCTAPostProcessController").getURIBuilder().setString("cta_id",a).setString("message_id",c).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){return d.location=a.payload}).send()};a.prototype.postHandle=function(a,c){a=b("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation").getURI({cta_id:a,message_id:c});new(b("AsyncRequest"))().setURI(a).send()};a.prototype.logCTAClick=function(a){var c,d;d=(d=a)!=null?d.logging_token:d;var e=d?JSON.parse(d).click_source:b("MNPlatformClickSource").UNKNOWN;e={action_id:(c=a)!=null?c.id:c,action_title:((c=a)!=null?c.action_title:c)||((c=a)!=null?c.title:c)||((c=a)!=null?c.translated_title:c),action_type:(c=a)!=null?c.action_type:c,action_url:((c=a)!=null?c.action_url:c)||((c=a)!=null?c.action_link:c),click_source:e,page_id:(c=a)!=null?c.page_id:c};new(b("MessengerPlatformClientTypedLogger"))().setClientUserID(b("CurrentUser").getID()).setName("did_tap_call_to_action").setExtraClientData(JSON.stringify(e)).setLoggingToken(d).log()};function a(){}e.exports=new a()}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/postback/",{cta_id:{type:"String",required:!0},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackCTADataManager",["AsyncRequest","BanzaiODS","CurrentUser","getPageIDFromThreadID","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MNPlatformTagsDataManager","XMNCommercePostbackCTAController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryMessageActions").get();a.prototype.send=function(a,c,d,e){c===void 0&&(c=null);d===void 0&&(d=null);e===void 0&&(e=null);a=b("XMNCommercePostbackCTAController").getURIBuilder().setString("cta_id",a).setString("ref",d).setString("message_id",e).getURI();!c?new(b("AsyncRequest"))().setURI(a).setMethod("POST").send():new(b("AsyncRequest"))().setURI(a).setMethod("POST").setErrorHandler(c).send()};a.prototype.sendAndConfirm=function(a,b,c,d,e,f,g,h){e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=[]),h===void 0&&(h=null),b!==null&&this.sendConfirmationText(b,c,d,g),this.send(a,e,f,h)};a.prototype.sendConfirmationText=function(a,c,d,e){e===void 0&&(e=[]);if(!c)b("BanzaiODS").bumpEntityKey("messenger_commerce","confirm_message_failed.empty_threadID");else{var f=new(b("MercuryMessageObject"))(b("CurrentUser").getID()),h=b("getPageIDFromThreadID")(c);b("MNPlatformTagsDataManager").hasThreadTags(h)&&e.concat(b("MNPlatformTagsDataManager").getThreadTags());g.send(f.constructCTAConfirmationMessageObject(a,b("MercurySourceType").TITAN_WEB,c,d,e));e&&e.length>0&&b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread()}};function a(){}e.exports=new a()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/postback_ref/",{page_id:{type:"String",required:!0},ref:{type:"String",required:!0},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackRefSendManager",["AsyncRequest","MessengerActions","MessengerMDotMeReferralStore","XMNCommercePostbackRefSendController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.sendMDotMeRef=function(a,c){var d=this.getMdotMeRef();if(this.shouldSendRef(c,a)){c=b("XMNCommercePostbackRefSendController").getURIBuilder().setString("page_id",a).setString("ref",d).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();b("MessengerActions").changeMDotMeReferral()}};a.prototype.shouldSendRef=function(a,b){return!b||!a?!1:this.hasMDotMeRef(b)};a.prototype.hasMDotMeRef=function(a){var c=b("MessengerMDotMeReferralStore").getState();return!!(c.refCode&&a&&c.refThreadID&&c.refThreadID===a)};a.prototype.getMdotMeRef=function(){var a=b("MessengerMDotMeReferralStore").getState();return a.refCode};function a(){}e.exports=new a()}),null);
__d("MessengerWorkContextInformationWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"2100811943310675"};c.getQueryID=function(){"use strict";return"282206062494175"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MercuryWorkContextInformation",["EventEmitter","KeyedCallbackManager","MercuryDispatcher","MercurySingletonProvider","MessengerWorkContextInformationWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("EventEmitter"))();function a(a){__p&&__p();this.$4=new Map(),this.$6=function(a){__p&&__p();if(a&&a.user!=null&&a.user.id!=null&&a.user.scim_company_user){var b=a.user.id;a=a.user.scim_company_user;var c=a.work_phone_numbers!=null?a.work_phone_numbers.nodes.filter(function(a){return a.is_primary_number===!0&&a.user_phone_number_type}).shift():null,d=a.work_location!=null?a.work_location.nodes[0]:null,e={};e[b]={phone:c?[c.user_phone_number_for_display]:null,email:a.email!=null&&a.is_emailless!==!0?[a.email]:null,location:d?[d.user_formatted_address]:null};this.$3.addResourcesAndExecute(e);this.$4.set(b,!1);g.emit("change")}}.bind(this),this.$1=a,this.$2=b("MercuryDispatcher").getForFBID(this.$1),this.$3=new(b("KeyedCallbackManager"))(),this.$4=new Map()}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};a.prototype.getTopThreads=function(){return this.$3.getAllResources()};a.prototype.getOrFetch=function(a){if(a==null)return null;var b=this.$3.getResource(a);if(b)return b;this.$5(a);return null};a.prototype.$5=function(a){if(this.$4.get(a))return;this.$4.set(a,!0);b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerWorkContextInformationWebGraphQLQuery"))({id:a})),this.$6)};a.addListener=function(a,b){return g.addListener(a,b)};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerPromotionDataActions",["MessengerPromotionDataDispatcher"],(function(a,b,c,d,e,f){"use strict";a={setPromotionData:function(a){b("MessengerPromotionDataDispatcher").dispatch({type:"SET_PROMOTION_DATA",promotionData:a})}};e.exports=a}),null);
__d("WorkchatAppKeyboardShortcut.react",["cx","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b("immutable").List;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_2_xt _4lrb"},b("React").createElement("div",{className:"_4lrc"},this.props.label),b("React").createElement("div",{className:"_4lrl"},this.props.keys.map(function(a){return b("React").createElement("span",{className:"_4lrm",key:a},a)})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("WorkchatAppKeyboardShortcutsDialog.react",["cx","fbt","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerDialogTitleReact.re","React","WorkchatAppKeyboardShortcut.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component,l=b("MessengerDialogTitleReact.re").component,m=b("immutable").List,n=function(a){return a==="darwin"?{CmdOrCtrl:"\u2318",Alt:"\u2387",Shift:"\u21e7",Tab:"\u21b9",Up:"\u2191",Down:"\u2193"}:{CmdOrCtrl:"Ctrl",Alt:"Alt",Shift:"Shift",Tab:"Tab",Up:"\u2191",Down:"\u2193"}},o=function(a){a=n(a);return m([{Header:"General",Shortcuts:m([{label:h._("Create new chat"),keys:m([a.CmdOrCtrl,"N"])},{label:h._("Search chats"),keys:m([a.CmdOrCtrl,"K"])},{label:h._("Show\/hide notifications"),keys:m([a.CmdOrCtrl,"/"])}])},{Header:"Navigation",Shortcuts:m([{label:h._("Go to previous chat"),keys:m([a.Alt,a.Up])},{label:h._("Go to next chat"),keys:m([a.Alt,a.Down])},{label:h._("Go to next element"),keys:m([a.Tab])},{label:h._("Open\/select element"),keys:m(["Spacebar"])}])},{Header:"In a Conversation",Shortcuts:m([{label:h._("Show\/hide information"),keys:m([a.CmdOrCtrl,"."])},{label:h._("Mute\/unmute chat"),keys:m([a.CmdOrCtrl,a.Shift,"M"])},{label:h._("Find in chat"),keys:m([a.CmdOrCtrl,"F"])}])},{Header:"During a Call",Shortcuts:m([{label:h._("Toggle mute"),keys:m(["M"])},{label:h._("Toggle video"),keys:m(["V"])}])}])};c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={allShortcuts:o(this.props.platform)},b}a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1,type:"default",width:560},b("React").createElement(k,null,b("React").createElement(l,null,h._("Keyboard Shortcuts")),b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Done"),type:"primary",use:"default"})),b("React").createElement(j,null,this.$2()))};a.prototype.$2=function(){return b("React").createElement("div",{className:"_4yne"},this.state.allShortcuts.map(function(a,c){return b("React").createElement("div",{className:"_2_xt"+(c!==0?" _4ynf":""),key:a.Header},b("React").createElement("div",{className:"_4ynr"},a.Header),b("React").createElement("div",null,a.Shortcuts.map(function(a){return b("React").createElement(b("WorkchatAppKeyboardShortcut.react"),{key:a.label,keys:a.keys,label:a.label})})))}))};a.prototype.$1=function(a){a||b("MessengerDialogs.bs").removeDialog()};e.exports=a}),null);
__d("WorkchatAppBridge",["fbt","invariant","Arbiter","CurrentLocale","CurrentUser","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MercuryThreadInformer","MessengerActions","MessengerDialogs.bs","MessengerInfoPanelSearchReact.bs","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerPromotionDataActions","MessengerRTCInvokeHandler","MessengerSettingsActions","MessengerSettingsStore","MessengerState.bs","MessengerURIListener","MessengerURIStore","React","WorkchatAppKeyboardShortcutsDialog.react","gkx","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={TOGGLE_NOTIFICATION_DIALOG:"TOGGLE_NOTIFICATION_DIALOG",getParticipants:function(a,c){var d=b("immutable").Map();return d.withMutations(function(d){a.participants&&a.participants.forEach(function(a){d.set(a,b("MessengerParticipants.bs").getNow(a))}),a.is_subscribed&&d.set(b("MercuryIDs").getParticipantIDFromUserID(c),b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c)))})},toggleWorkNotificationJewel:function(){b("Arbiter").inform(i.TOGGLE_NOTIFICATION_DIALOG)},toggleKeyboardShortCutsList:function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("WorkchatAppKeyboardShortcutsDialog.react"),{platform:a})})},toggleInfoPanel:function(){var a=b("MessengerSettingsStore").getSettings().info_sidebar_collapsed;b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!a})},getCurrentUser:function(){return{isWorkUser:b("CurrentUser").isWorkUser,isEmployee:b("CurrentUser").isEmployee,getID:b("CurrentUser").getID}},getCurrentLocale:function(){return b("CurrentLocale").get()},subscribeToUnseenMessageCount:function(a){var c=b("MercuryThreadInformer").get();c.subscribe("unseen-updated",function(){return a(b("MessengerState.bs").getUnseenUnreadCount(b("CurrentUser").getID()))});c.subscribe("unread-updated",function(){return a(b("MessengerState.bs").getUnseenUnreadCount(b("CurrentUser").getID()))})},enableDesktopNotifs:function(){b("MessengerSettingsActions").changeDesktopNotifs(!0)},onSampleTextFromThread:function(a){__p&&__p();function c(){var c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;b("MessengerState.bs").getThreadMessagesRange(b("CurrentUser").getID(),c,0,10,function(b){b=b.map(function(a){return a.body}).join("\n");a(b)})}c();b("MessengerURIStore").addListener("change",function(){c()})},selectThread:function(a){b("MessengerActions").selectThread("thread:"+a)},newThread:function(){b("MessengerActions").changeDetailView("detail/compose")},searchInChat:function(){var a={preventDefault:function(){}};b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!1});b("MessengerInfoPanelSearchReact.bs").handleSearchThreadClick(a)},restartURIListener:function(){b("MessengerURIListener").stop(),b("MessengerURIListener").start()},toggleMuteConversation:function(){var a=b("CurrentUser").getID(),c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;var d=b("MessengerState.bs").getThreadMetaNow(a,c);if(!d)return;d=b("MercuryThreadInfo").isMuted(d);a=b("MercuryThreadActions").getForFBID(a);d?a.unmute(c):a.updateMuteSetting(c,-1)},showAppUpdateBanner:function(a){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:g._("A new version is available with improvements and fixes."),primaryActionTitle:g._("Click to update"),primaryActionCallback:a})}};e.exports=i}),null);
__d("WorkNuxID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DO_NOT_DISTURB_PROMOTION_NUX_ID:6237,WORK_CHAT_DOWNLOAD_UPSELL_BANNER:5468})}),null);
__d("WorkOnboardingLogAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_THREAD_CREATED_WITH_INVITER:"CHAT_THREAD_CREATED_WITH_INVITER",CLICKED_HOWTO_GUIDE:"CLICKED_HOWTO_GUIDE",CREATE_SECRET_GROUP:"CREATE_SECRET_GROUP",CREATE_SECRET_GROUP_FAILED:"CREATE_SECRET_GROUP_FAILED",LANDED_IN_GROUP_START_AFTER_SIGNUP:"LANDED_IN_GROUP_START_AFTER_SIGNUP",NEW_USER_CREATED:"NEW_USER_CREATED",SHOWN_HOWTO_RHC:"SHOWN_HOWTO_RHC",SURVEY_COMPLETED:"SURVEY_COMPLETED",SURVEY_SHOWN:"SURVEY_SHOWN",SURVEY_SKIPPED:"SURVEY_SKIPPED",SURVEY_JOB_TITLE_COMPLETED:"SURVEY_JOB_TITLE_COMPLETED",SURVEY_COMPANY_SIZE_COMPLETED:"SURVEY_COMPANY_SIZE_COMPLETED",SURVEY_ROLLOUT_COMPLETED:"SURVEY_ROLLOUT_COMPLETED",GROUP_BOT_RESPONSE:"GROUP_BOT_RESPONSE",ADD_FEEDBACK_TO_GROUP_NUX_DISSMISSED:"ADD_FEEDBACK_TO_GROUP_NUX_DISSMISSED",ADD_FEEDBACK_TO_GROUP_NUX_SHOWN:"ADD_FEEDBACK_TO_GROUP_NUX_SHOWN",ADD_NEW_MEMBER_NUX_SHOWN:"ADD_NEW_MEMBER_NUX_SHOWN",ADD_NEW_MEMBER_NUX_DISMISSED:"ADD_NEW_MEMBER_NUX_DISMISSED",CREATE_GROUP_NUX_SHOWN:"CREATE_GROUP_NUX_SHOWN",CREATE_GROUP_NUX_DISMISSED:"CREATE_GROUP_NUX_DISMISSED",DEMO_GROUP_NUX_SHOWN:"DEMO_GROUP_NUX_SHOWN",DEMO_GROUP_NUX_DISMISSED:"DEMO_GROUP_NUX_DISMISSED",GROUP_EMPTY_POST_NUX_SHOWN:"GROUP_EMPTY_POST_NUX_SHOWN",GROUP_EMPTY_POST_NUX_DISMISSED:"GROUP_EMPTY_POST_NUX_DISMISSED",LANDING_NUX_SHOWN:"LANDING_NUX_SHOWN",LANDING_NUX_DISSMISSED:"LANDING_NUX_DISSMISSED",POST_TO_GROUP_NUX_DISSMISSED:"POST_TO_GROUP_NUX_DISSMISSED",POST_TO_GROUP_NUX_SHOWN:"POST_TO_GROUP_NUX_SHOWN",GROUP_MODAL_NUX_SHOWN:"GROUP_MODAL_NUX_SHOWN",GROUP_MODAL_NUX_DISMISSED:"GROUP_MODAL_NUX_DISMISSED",CHAT_APP_UPSELL_BANNER_SHOWN:"CHAT_APP_UPSELL_BANNER_SHOWN",CHAT_APP_UPSELL_BANNER_BUTTON_CLICKED:"CHAT_APP_UPSELL_BANNER_BUTTON_CLICKED",CHAT_APP_UPSELL_BANNER_DISMISSED:"CHAT_APP_UPSELL_BANNER_DISMISSED",INSTANCE_ACTIVE_CONDITION_CHECK:"INSTANCE_ACTIVE_CONDITION_CHECK",GROUP_EMPTY_UI_SHOWN:"GROUP_EMPTY_UI_SHOWN",GROUP_EMPTY_POST_CLICKED:"GROUP_EMPTY_POST_CLICKED",NEWSFEED_EMPTY_UI_SHOWN:"NEWSFEED_EMPTY_UI_SHOWN",NEWSFEED_EMPTY_UI_CLICKED:"NEWSFEED_EMPTY_UI_CLICKED",ADD_MEMBER_TO_NEW_GROUP_BUTTON_SHOWN:"ADD_MEMBER_TO_NEW_GROUP_BUTTON_SHOWN",ADD_NEW_MEMBER_TO_SMALL_GROUP_CLICKED:"ADD_MEMBER_TO_NEW_GROUP_CLICKED",GROUP_START_CREATE_GROUP_CLICKED:"GROUP_START_CREATE_GROUP_CLICKED",GROUP_START_FIX_GROUP_SUGGESTIONS:"GROUP_START_FIX_GROUP_SUGGESTIONS",GROUP_START_GROUP_CLICKED:"GROUP_START_GROUP_CLICKED",GROUP_START_JOIN_GROUP_CLICKED:"GROUP_START_JOIN_GROUP_CLICKED",GROUP_START_NAVIGATED_TO:"GROUP_START_NAVIGATED_TO",GROUP_START_SUGGESTED_GROUP_CLICKED:"GROUP_START_SUGGESTED_GROUP_CLICKED",GROUP_START_WATERMARK_SHOWN:"GROUP_START_WATERMARK_SHOWN",GROUP_DASH_NAVIGATED_TO:"GROUP_DASH_NAVIGATED_TO"})}),null);
__d("XWorkplaceDesktopDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/desktop/download/{?file}/",{build:{type:"String"},file:{type:"String"},ref:{type:"String"}})}),null);
__d("WorkplaceChatUpsellBanner.react",["ix","cx","fbt","Promise","BasicFBNux","Bootloader","Event","Image.react","Link.react","React","SubscriptionsHandler","UserAgent","WorkNuxID","WorkOnboardingLogAction","XUIButton.react","XWorkplaceDesktopDownloadController","asset","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k="https://play.google.com/store/apps/details?id=com.facebook.workchat",l="https://itunes.apple.com/app/work-chat/id958124798";c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(){j.constructor.call(this),this.state={xOutAppUpsell:!1},this.$2=new(b("SubscriptionsHandler"))()}a.prototype.componentDidMount=function(){this.$3()};a.prototype.componentWillUnmount=function(){this.$2.release()};a.prototype.render=function(){return b("React").createElement("div",{className:"_3ej0"+(this.state.xOutAppUpsell?" _3ej2":"")},i._("Get the app and chat anywhere, anytime"),this.$4(),this.$5())};a.prototype.$4=function(){var a=null;b("UserAgent").isPlatform("Mac OS X")?a=b("XWorkplaceDesktopDownloadController").getURIBuilder().setString("file","mac").setString("ref","chat_upsell").getURI():b("UserAgent").isPlatform("Windows")&&(a=b("XWorkplaceDesktopDownloadController").getURIBuilder().setString("file","win").setString("ref","chat_upsell").getURI());return b("React").createElement("div",{className:"_3-9a"},a?this.$6(a.toString(),i._("Desktop App")):null,this.$6(l,i._("iOS")),this.$6(k,i._("Android")))};a.prototype.$6=function(a,c){return b("React").createElement(b("XUIButton.react"),{target:"_blank",className:"_3ej4",label:c,href:a,onClick:function(){return this.$7(c)}.bind(this)})};a.prototype.$5=function(){return b("React").createElement(b("Link.react"),{className:"_7fxb",onClick:function(){return this.$8()}.bind(this)},b("React").createElement(b("Image.react"),{alt:"X",src:g("480720")}))};a.prototype.$8=function(){this.$9(),this.setState({xOutAppUpsell:!0}),window.setTimeout(function(){return b("Event").fire(window,"resize")},300)};a.prototype.$7=function(a){b("promiseDone")(this.$10(),function(c){c=c.logger;c.clear();c.setAction(b("WorkOnboardingLogAction").CHAT_APP_UPSELL_BANNER_BUTTON_CLICKED).addToExtraData("button",a.toString()).log()})};a.prototype.$9=function(){b("promiseDone")(this.$10(),function(a){a=a.logger;a.clear();a.setAction(b("WorkOnboardingLogAction").CHAT_APP_UPSELL_BANNER_DISMISSED).log()})};a.prototype.$3=function(){b("BasicFBNux").onView(b("WorkNuxID").WORK_CHAT_DOWNLOAD_UPSELL_BANNER),b("promiseDone")(this.$10(),function(a){a=a.logger;a.clear();a.setAction(b("WorkOnboardingLogAction").CHAT_APP_UPSELL_BANNER_SHOWN).log()})};a.prototype.$10=function(){this.$1||(this.$1=new(b("Promise"))(function(a,c){this.$2.addSubscriptions(b("Bootloader").loadModules(["WorkOnboardingTypedLogger"],function(b,c){c=new b();a({logger:c})},"WorkplaceChatUpsellBanner.react"))}.bind(this)));return this.$1};e.exports=a}),null);
__d("WorkGalahadChatSendButton.react",["cssVar","cx","Link.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=a.customColor,d=a.onClick;a=a.className;c=c!==null?c:"#373e4c";return b("React").createElement(b("Link.react"),{onClick:d,className:b("joinClasses")(a,"_7dch")},b("React").createElement("svg",{className:"_3-8h",width:"20px",height:"20px",viewBox:"0 0 24 24",version:"1.1"},b("React").createElement("g",{id:"workplace-chat-send",stroke:"none",strokeWidth:"1",fill:c,fillRule:"evenodd"},b("React").createElement("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",id:"Path",fill:c}))))}e.exports=a}),null);
__d("P2PPaymentPickerDialog.react",["cx","fbt","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerGraphQLTokenizer.react","React","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogHeaderReact.re").component,k=b("MessengerDialogTitleReact.re").component;c=b("React").PropTypes;var l=460,m=b("immutable").Set();d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={entries:b("immutable").Set()},this.$1=function(){var a=this.state.entries;this.props.handleContinue(a)}.bind(this),this.$2=function(){var a=this.state.entries;this.props.handleCancel(a)}.bind(this),this.handleAddEntryAttempt=function(a){this.props.multiSelect?this.setState({entries:this.state.entries.add(a)}):this.setState({entries:b("immutable").Set.of(a)})}.bind(this),this.handleRemoveEntryAttempt=function(a){this.setState({entries:this.state.entries["delete"](a)})}.bind(this),c}a.prototype.renderHeader=function(){return b("React").createElement(j,null,b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(k,null,h._("Send Money")),b("React").createElement(b("MessengerDialogButton.react"),{disabled:!this.state.entries.size,label:h._("Continue"),type:"primary",onClick:this.$1}))};a.prototype.renderTokenizer=function(){return b("React").createElement(b("MessengerGraphQLTokenizer.react"),{autoFocus:!0,canViewerSendMoneyFilter:!0,className:"_2wsl",context:null,enableMessageSearch:!1,entries:this.state.entries.toList(),excludeGroups:!0,excludePages:!0,forceHideClearButton:!0,hasHoverState:!1,originalEntryIDs:m,placeholder:h._("Type the name of a person"),scrollableViewClassName:"_2wsm",shouldQueryInternalBot:!1,shouldQueryVCEndpoint:!1,useLayer:!1,viewer:this.props.viewer,width:l,onAddEntryAttempt:this.handleAddEntryAttempt,onClear:null,onRemoveEntryAttempt:this.handleRemoveEntryAttempt})};a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{className:"_2wsn",type:"default",width:l,onToggle:this.$2},this.renderHeader(),this.renderTokenizer())};a.propTypes={viewer:c.string.isRequired,handleContinue:c.func.isRequired,handleCancel:c.func.isRequired,multiSelect:c.bool.isRequired};e.exports=a}),null);
__d("MessengerP2PDialogContainer.react",["Bootloader","MercuryIDs","MessengerActions","MessengerURIStore","MessengerView","P2PActions","P2PDialogContainer.react","P2PPaymentPickerDialog.react","React","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){var a=b("MessengerURIStore").getState();a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER&&this.$1();var c=a.extraQueryParams;c&&c.id&&b("Bootloader").loadModules(["P2PSendMoneyDialogStore"],function(){this.$2(c)}.bind(this),"MessengerP2PDialogContainer.react")};a.prototype.componentDidUpdate=function(){var a=b("MessengerURIStore").getState();a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER&&this.$1();a=b("MessengerURIStore").getState().extraQueryParams;a&&a.id&&this.$2(a)};a.prototype.$1=function(){var a=function(a){b("P2PActions").hideDialog();a=a.first().getUniqueID();b("MessengerActions").changeID(a)},c=function(a){b("P2PActions").hideDialog(),b("MessengerActions").selectThread(null)};b("P2PActions").showDialog(b("P2PPaymentPickerDialog.react"),{viewer:this.props.viewer,handleContinue:a,handleCancel:c,multiSelect:!1})};a.prototype.$2=function(a){var c=b("MercuryIDs").getThreadIDFromUserID(a.id);b("P2PActions").chatSendViewOpened({referrer:"chat",threadID:c,amount:a.a,memoText:a.m})};a.prototype.render=function(){return b("React").createElement(b("P2PDialogContainer.react"),null)};function a(){g.apply(this,arguments)}a.propTypes={viewer:c.string.isRequired};e.exports=a}),null);
__d("MercuryGenericConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MAX_THREAD_NAME_LENGTH:250,MAX_GROUP_THREAD_DESCRIPTION_LENGTH:1e3})}),null);
__d("QuickPromotionActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:"none",CLOSE:"close",CUSTOM_URL:"custom",DIALOG_URL:"dialog_url",INSTALL_APP:"install_app",FACEWEB_URL:"faceweb_url",ITEMS_LIST:"items_list"})}),null);
__d("bs_marshal",["bs_caml_string","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.to_buffer: substring out of bounds"];else return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_buffer")}function g(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.data_size"];else return b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size")}function c(a,b){return 20+g(a,b)|0}function h(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else{var d=b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size");if(c>(a.length-(20+d|0)|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else return b("bs_caml_missing_polyfill").not_implemented("caml_input_value_from_string")}}function d(a,c){return h(b("bs_caml_string").bytes_of_string(a),c)}function e(a,c,d){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value")}function i(){return b("bs_caml_missing_polyfill").not_implemented("caml_input_value")}var j=20;f.to_channel=e;f.to_buffer=a;f.from_channel=i;f.from_bytes=h;f.from_string=d;f.header_size=j;f.data_size=g;f.total_size=c}),null);
__d("bs_obj",["bs_marshal","bs_caml_array","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_array").caml_array_get,h=b("bs_caml_array").caml_array_set;function a(){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_string")}function c(a,c){return[b("bs_marshal").from_bytes(a,c),c+b("bs_marshal").total_size(a,c)|0]}function i(a){a=a.length!==void 0&&(a.tag|0)!==248&&a.length>=1?a[0]:a;var c;if(a.length!==void 0&&a.tag===248)c=a[0];else throw b("bs_caml_builtin_exceptions").not_found;if(c.tag===252)return a;else throw b("bs_caml_builtin_exceptions").not_found}function d(a){try{a=i(a);return a[0]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_name"];else throw a}}function e(a){try{a=i(a);return a[1]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_id"];else throw a}}function j(a){try{return i(a)}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_slot"];else throw a}}var k=0,l=245,m=246,n=247,o=248,p=249,q=250,r=251,s=251,t=252,u=253,v=254,w=255,x=255,y=1e3,z=1001,A=1002;f.double_field=g;f.set_double_field=h;f.first_non_constant_constructor_tag=k;f.last_non_constant_constructor_tag=l;f.lazy_tag=m;f.closure_tag=n;f.object_tag=o;f.infix_tag=p;f.forward_tag=q;f.no_scan_tag=r;f.abstract_tag=s;f.string_tag=t;f.double_tag=u;f.double_array_tag=v;f.custom_tag=w;f.final_tag=x;f.int_tag=y;f.out_of_heap_tag=z;f.unaligned_tag=A;f.extension_name=d;f.extension_id=e;f.extension_slot=j;f.marshal=a;f.unmarshal=c}),null);
__d("bs_camlinternalLazy",["bs_obj","bs_curry","bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_exceptions").create("CamlinternalLazy.Undefined");function h(){throw g}function i(a){__p&&__p();var c=a[0];a[0]=h;try{c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}catch(b){a[0]=function(){throw b};throw b}}function j(a){var c=a[0];a[0]=h;c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}function a(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return i(a)}function c(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return j(a)}f.Undefined=g;f.force_lazy_block=i;f.force_val_lazy_block=j;f.force=a;f.force_val=c}),null);
__d("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1574519202665847"};c.getQueryID=function(){"use strict";return"337579896759283"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerThreadSharedFilesWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"2150199688342867"};c.getQueryID=function(){"use strict";return"1887039681373281"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerThreadSharedLinksWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"2289069757800221"};c.getQueryID=function(){"use strict";return"498775913895223"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerThreadlistWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1978259518958339"};c.getQueryID=function(){"use strict";return"759431377769189"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XMNCommercePageNullStateCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/page/nullstate/",{})}),null);
__d("XMessagingSetThreadImageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_thread_image/",{})}),null);
__d("XMessengerDotComNUXLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logging/promotion/",{promotion_id:{type:"Int",required:!0},instance_log_data:{type:"StringToStringMap",defaultValue:{}}})}),null);
__d("XShareScrapeAttachmentAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/message_share_attachment/fromURI/",{})}),null);